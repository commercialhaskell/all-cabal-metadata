homepage: ''
changelog-type: markdown
hash: 8f34146d9fc2854d72d74593d787a5dfd6d7183b060e711715a273980b4bdf19
test-bench-deps:
  bytestring: -any
  composition-prelude: -any
  extra: -any
  kempe-modules: -any
  base: -any
  tasty-golden: -any
  text: -any
  filepath: -any
  criterion: -any
  process: -any
  tasty-hunit: -any
  prettyprinter: '>=1.7.0'
  temporary: -any
  tasty: -any
  deepseq: -any
maintainer: vamchale@gmail.com
synopsis: Kempe compiler
changelog: |
  # kempe

  ## 0.2.0.10

    * Fix bug in typechecking against inferred signatures.
    * Fix bug in prelude

  ## 0.2.0.9

    * Add `armabi` method of exporting Kempe functions, so that `kc` generates
      suitable code for M1 darwin.
    * Add `cdecl` subcommand to generate C headers for exported functions

  ## 0.2.0.8

    * More efficient IR generation; don't copy bytes from a source to the same
      destination
    * Fix bugs in `case` IR generation

  ## 0.2.0.7

    * Fix bug in unification
    * Fix bug so that `and` and `or` instructions print correctly for x86 assembler
    * Add lints for `dip(+) +` to `+ +`, (associative dip) `dup and` to `id`, etc.
    * Add lints for `swap swap` and `1 drop` etc.
    * Add `join` for `Maybe` and `Either`
    * Last branch of case statement always falls through (more efficient code)

  ## 0.2.0.6

    * Add `absInt` and `chocie` functions to prelude.
    * Add lints for `swap >`, `swap *` &c.
    * Fix bug in typing `>=`, `>`, `!=`

  ## 0.2.0.5

    * Fix bug in arm control-flow analysis
    * Fix bugs in IR optimization pass
    * Improve IR optimization
    * Add `fromMaybe` and `fromRight` functions

  ## 0.2.0.4

    * Kind-check external function declarations
    * Fix bug in inliner where functions within `dip(...)`s were not inlined
    * Fix unification bug where solved constraints were not back-substituted correctly.

  ## 0.2.0.3

    * GHC 8.0.2 and 8.2.2

  ## 0.2.0.2

    * Improve performance + generated code
    * Fix bug in monomorphization of patterns

  ## 0.2.0.1

    * Performance improvements when assembling x86
    * Fix pattern match exhaustiveness checker
    * More lenient command-line parser

  ## 0.2.0.0

    * Add aarch64 backend
    * Change type of shifts, they no longer take an `Int8` as the second argument.

  ## 0.1.1.3

    * Tweak some RTS flags for faster performance
    * `lib/gaussian.kmp` has `mult` function
    * A couple inefficiencies under the hood

  ## 0.1.1.2

    * Case statements with a single branch are plain and efficient.
    * Add `safeDiv` and `safeMod` to `prelude/arith.kmp`

  ## 0.1.1.1

    * Performance improvements under the hood (use `IntSet`s for liveness
      analysis)

  ## 0.1.1.0

    * Fix internal pretty-printer (exposed as hidden `fmt` subcommand)
    * Optimize IR cases
    * Fix padding
    * Fix bug in lexer (for C foreign calls)
    * Support down to GHC 8.0.2
    * Unification no longer takes pathologically long time
    * Add test files so source distribution passes
    * Some sort of imports now supported.

  ## 0.1.0.2

    * Add optimizations (simplify code so that liveness analysis is quicker)
    * Fix major bug in kind-checker
    * Fix bug in type assignment

  ## 0.1.0.1

    * Better debug pretty-printer
    * Pattern match exhaustiveness checker so that pattern matches don't do
      something heinous at runtime

  ## 0.1.0.0

  Initial release
basic-deps:
  bytestring: -any
  kempe-modules: -any
  base: -any
  text: -any
  prettyprinter: '>=1.7.0'
  optparse-applicative: -any
all-versions:
- 0.1.0.0
- 0.1.0.1
- 0.1.0.2
- 0.1.1.0
- 0.1.1.1
- 0.1.1.2
- 0.1.1.3
- 0.2.0.0
- 0.2.0.1
- 0.2.0.2
- 0.2.0.3
- 0.2.0.4
- 0.2.0.5
- 0.2.0.6
- 0.2.0.7
- 0.2.0.8
- 0.2.0.9
- 0.2.0.10
author: Vanessa McHale
latest: 0.2.0.10
description-type: markdown
description: |
  # Kempe

  Kempe is a stack-based language and toy compiler for x86_64 and aarch64. It requires the
  [nasm](https://nasm.us/) assembler when targeting x86_64.

  Inspiration is primarily from [Mirth](https://github.com/mirth-lang/mirth).

  See manual
  [here](http://hackage.haskell.org/package/kempe/src/docs/manual.pdf). There is
  also a tour of the compiler available
  [here](http://vmchale.com/static/original/compiler.pdf).

  ## Installation

  Installation is via [cabal-install](https://www.haskell.org/cabal/):

  ```
  cabal install kempe
  ```

  For shell completions put the following in your `~/.bashrc` or
  `~/.bash_profile`:

  ```
  eval "$(kc --bash-completion-script kc)"
  ```

  ## Defects

    * Errors don't have position information
    * Monomorphization fails on recursive polymorphic functions

      Hopefully this isn't too sinful; I can't think of any examples of recursive
      polymorphic functions
    * Can't export or call C functions with more than 6 arguments; can't call or
      export large arguments (i.e. structs) passed by value.

      This is less of an impediment than it sounds like.
    * Cyclic imports are not detected
    * Imports are kind of defective

  ### Comparison

  You may wish to use [Mirth](https://github.com/mirth-lang/mirth/) or
  [Factor](https://factorcode.org/) instead. Mirth is statically typed (similar to
  Kempe) but less mature.
license-name: BSD-3-Clause
