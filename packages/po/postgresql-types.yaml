all-versions:
- '0.1'
- 0.1.1
- 0.1.1.1
author: Nikita Volkov <nikita.y.volkov@mail.ru>
basic-deps:
  QuickCheck: '>=2.14 && <3'
  aeson: '>=2.2 && <3'
  attoparsec: '>=0.14 && <0.19'
  base: '>=4.11 && <5'
  bytestring: '>=0.10 && <0.13'
  containers: '>=0.6 && <0.9'
  hashable: '>=1.3 && <2'
  jsonifier: ^>=0.2.1.3
  mtl: '>=2.2 && <3'
  postgresql-types: '>=0'
  postgresql-types-algebra: ^>=0.1
  ptr-peeker: ^>=0.1
  ptr-poker: ^>=0.1.3
  scientific: '>=0.3 && <1'
  tagged: ^>=0.8.9
  text: '>=1.2 && <3'
  text-builder: ^>=1.0.0.4
  time: '>=1.12 && <2'
  transformers: '>=0.5 && <0.7'
  uuid: '>=1.3 && <2'
  vector: ^>=0.13
changelog: ''
changelog-type: ''
description: "# postgresql-types\n\n[![Hackage](https://img.shields.io/hackage/v/postgresql-types.svg)](https://hackage.haskell.org/package/postgresql-types)\n[![Continuous
  Haddock](https://img.shields.io/badge/haddock-master-blue)](https://nikita-volkov.github.io/postgresql-types/)\n\nPrecise
  Haskell representations of PostgreSQL data types with mappings to and from both
  binary and textual formats.\n\n## Status\n\nIn active development, but already working
  and exhaustively tested.\n\n## Key Features\n\n### Ecosystem Integration\n\nAdapter
  packages provide integrations for major PostgreSQL client libraries:\n\n- \"hasql\":
  [\"hasql-postgresql-types\"](https://github.com/nikita-volkov/hasql-postgresql-types)\n-
  \"postgresql-simple\": [\"postgresql-simple-postgresql-types\"](https://github.com/nikita-volkov/postgresql-simple-postgresql-types)\n\n###
  Supported Types\n\nThis package provides support for nearly all PostgreSQL data
  types, including:\n\n- **Numeric types**: Int2, Int4, Int8, Float4, Float8, Numeric,
  Money, Oid\n- **Character types**: Char, Varchar, Text, Bpchar\n- **Boolean type**:
  Bool\n- **Binary data**: Bytea\n- **Date/time types**: Date, Time, Timestamp, Timestamptz,
  Timetz, Interval\n- **Network address types**: Inet, Cidr, Macaddr, Macaddr8\n-
  **Geometric types**: Point, Line, Lseg, Box, Path, Polygon, Circle\n- **Bit string
  types**: Bit, Varbit\n- **UUID type**: Uuid\n- **JSON types**: Json, Jsonb\n- **Key-value
  types**: Hstore\n- **Range types**: Range (supporting int4range, int8range, numrange,
  tsrange, tstzrange, daterange)\n- **Multirange types**: Multirange (supporting int4multirange,
  int8multirange, etc.)\n- **Array types** for all of the above\n\nFor detailed information
  about each type, see the [package documentation](https://hackage.haskell.org/package/postgresql-types).\n\n###
  Type Safety & Valid Ranges\n\nAll PostgreSQL types are represented with hidden constructors,
  ensuring that only valid PostgreSQL values can be constructed. This design prevents
  invalid data from being represented at the type level.\n\nValues can only be created
  through explicit constructor functions, guaranteeing adherence to PostgreSQL's constraints
  (e.g., dates within PostgreSQL's supported range, text without NUL bytes).\n\n###
  Type-Safe Constructors\n\nThe library provides three types of functions for working
  with PostgreSQL types:\n\n- **Normalizing constructors** (prefix: `normalizeFrom*`)
  - Always succeed by clamping or canonicalizing input values to valid ranges\n- **Refining
  constructors** (prefix: `refineFrom*`) - Return `Maybe`, failing if the input is
  out of range\n- **Accessor functions** (prefix: `to*`) - Extract values from PostgreSQL
  types to common Haskell types\n\nThis approach ensures that:\n- Type constructors
  remain hidden to protect invariants\n- All conversions are explicit and type-safe\n-
  Invalid data is either rejected or canonicalized (e.g., removing NUL bytes from
  text, clamping dates to valid range)\n- Round-trip properties are maintained via
  accessor functions\n\n### Complete Range Coverage with Property Testing\n\nEvery
  type implements `Arbitrary` instances that **simulate the complete range of valid
  PostgreSQL values**, not just convenient Haskell subsets. For example:\n\n- **`Date`**
  generates values spanning PostgreSQL's full range: 4713 BC to 5874897 AD\n- **`Text`**
  generates strings excluding NUL characters (as PostgreSQL doesn't allow them)\n-
  **`Circle`** generates circles with non-negative radii\n- **`Numeric`** covers arbitrary-precision
  numbers including edge cases\n\nThis comprehensive approach to test data generation
  ensures that the library is tested against the actual constraints and edge cases
  of PostgreSQL, not just typical use cases.\n\n### Exhaustive Testing\n\nThe library
  employs a rigorous multi-layered testing strategy:\n\n#### Unit Tests\n- **Encoder/Decoder
  Round-trips**: Every type is tested for round-trip fidelity through both binary
  and textual encodings\n- **Constructor Properties**: All constructor functions are
  validated for proper normalization and refinement behavior using property-based
  testing\n- **Cross-format Validation**: Binary encoders are tested against textual
  decoders and vice versa\n\n#### Integration Tests\n- **Real PostgreSQL Validation**:
  Tests run against actual PostgreSQL servers (versions 9 through 18)\n- **Four-way
  Round-trip Matrix**: Each value is tested through all four combinations:\n  1. Text
  encoding → Text decoding\n  2. Text encoding → Binary decoding  \n  3. Binary encoding
  → Text decoding\n  4. Binary encoding → Binary decoding\n- **Server Canonical Form**:
  All encodings are validated by sending values to PostgreSQL and verifying the server
  produces the expected output\n- **Array Support**: Every type is tested both as
  a scalar and as array elements\n- **Metadata Validation**: Type OIDs are verified
  against the PostgreSQL system catalog\n\nThis comprehensive testing model provides
  confidence that the library correctly handles all PostgreSQL types across all encoding
  formats and PostgreSQL versions.\n"
description-type: markdown
hash: 17fa632a67badd5111877c470cf9aa290a87a7db80fc1284365db8e0e707e9e9
homepage: https://github.com/nikita-volkov/postgresql-types
latest: 0.1.1.1
license-name: MIT
maintainer: Nikita Volkov <nikita.y.volkov@mail.ru>
synopsis: Precise PostgreSQL types representation and driver-agnostic codecs
test-bench-deps:
  QuickCheck: '>=2.14 && <3'
  aeson: '>=2.2 && <3'
  async: '>=2.2.6 && <2.3'
  attoparsec: '>=0.14 && <0.15'
  base: '>=4.11 && <5'
  bytestring: '>=0.10 && <0.13'
  containers: '>=0.6 && <0.9'
  hspec: '>=2.11 && <3'
  postgresql-libpq: '>=0.10 && <0.12'
  postgresql-types: '>=0'
  postgresql-types-algebra: '>=0.1 && <0.2'
  ptr-peeker: '>=0.1 && <0.2'
  ptr-poker: '>=0.1.2.16 && <0.2'
  quickcheck-classes: ^>=0.6.5
  quickcheck-instances: '>=0.3.33 && <0.4'
  scientific: '>=0.3 && <1'
  stm: '>=2.5 && <3'
  tagged: '>=0.8.9 && <0.9'
  testcontainers-postgresql: ^>=0.2.0.1
  text: '>=1.2 && <3'
  text-builder: '>=1.0.0.4 && <1.1'
  time: '>=1.12 && <2'
  uuid: '>=1.3 && <2'
  vector: ^>=0.13
