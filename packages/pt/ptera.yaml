homepage: https://github.com/mizunashi-mana/ptera
changelog-type: markdown
hash: bb99a287b6a69a1e8030c0b0d8cdf2d202e987442dd23a0fad0fdf12f8e0eb97
test-bench-deps:
  ptera-core: '>=0.1.0 && <0.2'
  membership: '>=0.0.1 && <0.1'
  base: '>=4.14.0 && <5'
  unordered-containers: '>=0.2.0 && <0.3'
  hspec: -any
  doctest: -any
  containers: '>=0.6.0 && <0.7'
  enummapset-th: '>=0.6.0 && <0.7'
  ptera: -any
  QuickCheck: -any
maintainer: mizunashi-mana@noreply.git
synopsis: A parser generator
changelog: ''
basic-deps:
  ptera-core: '>=0.1.0 && <0.2'
  membership: '>=0.0.1 && <0.1'
  base: '>=4.14.0 && <5'
  unordered-containers: '>=0.2.0 && <0.3'
  containers: '>=0.6.0 && <0.7'
  enummapset-th: '>=0.6.0 && <0.7'
all-versions:
- 0.1.0.0
author: Mizunashi Mana
latest: 0.1.0.0
description-type: markdown
description: |
  # Ptera: A Generator for Parsers

  [![Hackage](https://img.shields.io/hackage/v/ptera.svg)](https://hackage.haskell.org/package/ptera)

  ## Installation

  Add dependencies on `package.cabal`:

  ```
  build-depends:
      base,
      bytestring,
      ptera,          -- main
      ptera-th,       -- for outputing parser with Template Haskell
      charset,
      template-haskell,
  ```

  ## Usage

  Write parser rules:

  ```haskell
  data Terminal
      = Digit
      | SymPlus
      | SymMulti
      deriving (Eq, Show, Enum)

  data NonTerminal
      | Expr
      | Sum
      | Product
      | Value
      deriving (Eq, Show, Enum)

  type ParseRule = Rule Terminal NonTerminal


  data Ast
      = GenValue
      | GenSum (NonEmpty Ast)
      | GenProduct Ast Ast

  rExpr :: ParseRule Ast
  rExpr = rule Expr rSum

  rSum :: ParseRule Ast
  rSum = rule Sum do
      (rProduct <,> manyP do token SymPlus *> rProduct) <&> \(e, es) -> GenSum do e :| es

  rProduct :: ParseRule Ast
  rProduct = rule Product do
      orP
          [
              (rValue <* token SymMulti <,> rProduct) <&> \(e1, e2) -> GenProduct e1 e2,
              rValue
          ]

  rValue :: ParseRule Ast
  rValue = rule Value do token Digit *> pure GenValue
  ```

  ## Examples

  * Small language: https://github.com/mizunashi-mana/ptera/tree/master/example/small-lang
  * Haskell2010: https://github.com/mizunashi-mana/ptera/tree/master/example/haskell2010
license-name: (Apache-2.0 OR MPL-2.0)
