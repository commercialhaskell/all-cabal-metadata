all-versions:
- 0.1.0.0
- 0.2.0.0
- 0.3.0.0
- 0.3.1.0
- 0.3.1.1
- 0.4.0.0
- 0.4.0.1
- '0.5'
- 0.6.0.0
- 0.7.0.0
- 0.7.1.0
- 0.7.1.1
- 0.11.0
- 0.12.0.0
- 0.12.1.0
- 0.13.0.0
- 0.13.1.0
- 0.14.0.0
author: Trevor Elliott
basic-deps:
  base: '>=4.11 && <5'
  containers: '>=0.4'
  microlens: '>=0.4'
  microlens-th: '>=0.4'
  monadLib: '>=3.6.1'
  parsec: '>=3'
  pretty: '>=1.0.1'
  syb: '>=0.7'
  template-haskell: '>=2.7'
  th-abstraction: '>=0.3.1 && <0.8'
changelog: |
  # Revision history for llvm-pretty

  ## 0.14.0.0 -- 2026-01-22

  * Changes to support LLVM 19 (some of these changes are not backward-compatible):
    * Changes to `LayoutSpec` for DataLayout:
      * Size specification fields use a common sub-structure `Storage` which itself
        contains an `Alignment` common sub-structure: `IntegerSize`, `VectorSize`,
        `FloatSize`, and `StackObjSize`.
      * The pointer size specification field uses a `PointerSize` sub-structure
        that itself contains a `Storage` sub-structure.
      * Updated `AggregateSize` to make first field optional (it was dropped in
        LLVM 4) and the remaining fields are now provided via the `Alignment`
        sub-structure.
      * Added `ProgramAddrSpace`, `GlobalAddrSpace`, and `AllocaAddrSpace`
        constructors, each defined via an `AddressSpace` sub-structure.
      * Added `NonIntegralPointerSpaces` to record address spaces with an
        unspecified bitwise representation.
      * Added `GoffMangling`, `WindowsX86CoffMangling`, and `XCoffMangling` forms
        of Mangling.
    * Added `GEPAttr` flags for `GEP` instruction and constant expression, with
      `RangeSpec` for the latter.
    * Added `numExtraInhabitants` to `DIBasicType`.
    * Added support for `DebugRecord` parsing, specifically for:

      * `FUNC_CODE_DEBUG_RECORD_VALUE`
      * `FUNC_CODE_DEBUG_RECORD_DECLARE`
      * `FUNC_CODE_DEBUG_RECORD_ASSIGN`
      * `FUNC_CODE_DEBUG_RECORD_VALUE_SIMPLE`
      * `FUNC_CODE_DEBUG_RECORD_LABEL`

      This adds a new field to both the `Result` and `Effect` constructors of the `Stmt` type.
    * Pretty-printing with an LLVM version >= 19 now generates an error for `icmp`,
      `fcmp`, and `shl` constant expressions that are no longer supported as of
      LLVM 19.
  * Changes to cast-related instructions:
    * Add a `Bool` field to `ZExt` which, if `True`, indicates that the
      argument must be non-negative. This is used by LLVM 18 and up.
    * Add a `Bool` field to `UiToFp` which, if `True`, indicates that the
      argument must be non-negative. This is used by LLVM 19 and up.
    * Add `Bool` fields to `Trunc` to check if the truncation would cause
      unsigned or signed overflow. These are used by LLVM 20 and up.
  * Add a `Bool` field to `ICmp`, which indicates that the arguments must have
    the same sign. This is used by LLVM 20 and up.
  * Add `dlAtomGroup` and `dlAtomRank` fields to `DebugLoc'`, which were
    introduced in LLVM 21.
  * Add `dilColumn`, `dilIsArtificial`, and `dilCoroSuspendIdx` fields to
    `DILabel'`, which were introduced in LLVM 21.
  * The following debug-related fields have had their types changed from `Word64`
    to `Maybe (ValMd' lab)`:

    * `DIBasicType'`: `dibtSize`
    * `DICompositeType'`: `dictSize` and `dictOffset`
    * `DIDerivedType'`: `didtSize` and `didtOffset`

    This allows them to encode non-constant sizes and offsets (a capability used
    by Ada, for instance) in LLVM 21 or later.
  * Added the `bbStmtModifier` which can be used to modify individual statements as
    they are emitted from the top-level instruction generator functions (e.g to add
    Debug Metadata to each statement).
  * Fix a bug that would cause `indirectbr` statements to be pretty-printed
    incorrectly.

  ## 0.13.1.0 (October 2025)

  * Add a `FunctionPointerAlign` constructor to `LayoutSpec`.

  ## 0.13.0.0 (March 2025)

  * Changed some of the signatures of helper functions in the AST to make them more
    flexible by using `Type' ident` rather than `Type` in their signatures (the
    latter fixes `ident` to be `Ident`). Changed functions: `isAlias`,
    `isPrimTypeOf`, `isVector`, `isVectorOf`, `isArray`, and `isPointer`.

  ## 0.12.1.0 (August 2024)

  * Fix for printing NaN and infinite floating point values.

  * Add support for more AtomicRWOps.

  ## 0.12.0.0 (January 2024)

  * Add preliminary support for LLVM versions up through 17.
changelog-type: markdown
description: |
  # `llvm-pretty`

  A pretty printing library that was inspired by the LLVM binding by Lennart
  Augustsson. The library provides a monadic interface to a pretty printer, that
  allows functions to be defined and called, generating the corresponding LLVM
  assembly when run.

  ## LLVM language feature support

  Currently, `llvm-pretty` supports LLVM versions up through 17. As a result of
  the broad version coverage, the `llvm-pretty` AST is a superset of all versions
  of the LLVM AST. This means that the manner in which certain information is
  presented in the `llvm-pretty` AST (e.g., during pretty printing) will be
  different depending on the LLVM version used to originate the information.
  Conversely, it is possible to construct an `llvm-pretty` AST that cannot be
  represented in a specific (or any) LLVM version.

  `llvm-pretty` strives to support a reasonable variety of [LLVM language
  features](https://llvm.org/docs/LangRef.html), but there are places where our
  coverage of the LLVM language is incomplete. If you need a LLVM feature that is
  not currently supported by `llvm-pretty`, please [file an
  issue](https://github.com/GaloisInc/llvm-pretty/issues/new).

  ## `llvm-pretty` versus `llvm-pretty-bc-parser`

  `llvm-pretty` supports almost everything that one would want to do with LLVM
  ASTs. One notable exception is parsing: `llvm-pretty` deliberately does not
  support parsing an LLVM module AST from a bitcode file. This functionality is
  factored out into a separate
  [`llvm-pretty-bc-parser`](https://github.com/GaloisInc/llvm-pretty-bc-parser)
  library. `llvm-pretty-bc-parser` generally tries to stay in sync with all of
  the LLVM language features that `llvm-pretty` supports, but it may be the case
  that some valid `llvm-pretty` ASTs cannot be parsed by `llvm-pretty-bc-parser`.
  If you encounter an occurrence of this issue, please [file an
  issue](https://github.com/GaloisInc/llvm-pretty-bc-parser/issues/new) at the
  `llvm-pretty-bc-parser` issue tracker.
description-type: markdown
hash: d61adfbb3c2a7e3e4c13ff9347ca0f6eca089d90134f625652faac6a06904deb
homepage: ''
latest: 0.14.0.0
license-name: BSD-3-Clause
maintainer: rscott@galois.com, kquick@galois.com
synopsis: A pretty printing library inspired by the llvm binding.
test-bench-deps:
  base: '>=0'
  llvm-pretty: '>=0'
  pretty: '>=0'
  tasty: '>=0'
  tasty-hunit: '>=0'
  template-haskell: '>=0'
  text: '>=0'
