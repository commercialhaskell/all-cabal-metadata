homepage: https://github.com/alexmingoia/twain#readme
changelog-type: markdown
hash: 3c9b44d4867c36762c991ecfe4facdd2bd52c3ed0f9e14b8778e681c75498533
test-bench-deps: {}
maintainer: alex@alexmingoia.com
synopsis: Tiny web application framework for WAI.
changelog: |
  # Change Log

  ## 2.0.0.0 [2022-01-09]

  Simplify API to decompose routes into WAI middleware.

  ### Breaking changes

  - Removed `TwainM` monad in favor of composing WAI middleware.
  - Replace `RouteM` with `ResponderM`, no longer parametized by environment in
    preference for middleware utilizing request vault.
  - Replace string errors with new `HttpError`.
  - Rename param and file functions to be consistent.
    - Renamed `param'` to `paramEither`.
    - Renamed `file` to `fileMaybe`.
    - Added `file` which matches `param` functionality.
    - Changed behavior of `paramMaybe` to throw `HttpError`.
  - Set default cookie path and http-only.

  ### Added

  - Add additional helpers `withMaxBodySize` and `withParseBodyOpts` for limiting
    request body parsing.

  ## 1.0.1.0 [2021-09-15]

  - Export `parseBody` to allow custom `ParseRequestBodyOptions`.

  ## 1.0.0.0 [2021-05-11]

  - Initial release.
basic-deps:
  warp: '>=3.2 && <3.4'
  cookie: '>=0.4 && <0.6'
  exceptions: ==0.10.*
  either: ==5.0.*
  bytestring: ==0.10.*
  wai: ==3.2.*
  case-insensitive: ==1.2.*
  http2: '>=2.0 && <3.1'
  base: '>=4.7 && <5'
  time: '>=1.8 && <1.9.9'
  text: '>=1.2.3 && <1.3'
  vault: ==0.3.*
  wai-extra: '>=3.0 && <3.2'
  transformers: '>=0.5.6 && <0.6'
  http-types: ==0.12.*
  aeson: '>=1.4 && <1.7'
all-versions:
- 1.0.0.0
- 2.0.0.0
author: Alex Mingoia
latest: 2.0.0.0
description-type: markdown
description: |
  # Twain

  [![Hackage](https://img.shields.io/hackage/v/twain.svg?style=flat)](http://hackage.haskell.org/package/twain)
  ![BSD3 License](http://img.shields.io/badge/license-BSD3-brightgreen.svg)

  Twain is a tiny web application framework for
  [WAI](http://hackage.haskell.org/package/wai).

  - `ResponderM` for composing responses with do notation.
  - Routing with path captures that decompose `ResponderM` into middleware.
  - Parameter parsing from cookies, path, query, and body.
  - Helpers for redirects, headers, status codes, and errors.

  ```haskell
  import Network.Wai.Handler.Warp (run)
  import Web.Twain

  main :: IO ()
  main = do
    run 8080
      $ get "/" index
      $ post "/echo/:name" echoName
      $ notFound missing

  index :: ResponderM a
  index = send $ html "Hello World!"

  echo :: ResponderM a
  echo = do
    name <- param "name"
    send $ html $ "Hello, " <> name

  missing :: ResponderM a
  missing = send $ html "Not found..."
  ```
license-name: BSD-3-Clause
