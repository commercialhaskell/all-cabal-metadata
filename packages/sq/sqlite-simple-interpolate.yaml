homepage: https://github.com/ruby0b/sqlite-simple-interpolate
changelog-type: markdown
hash: c7de47bad117d9ec5e9bfb2f0fb1abe3b02af56f8719230b6117c65ac6305a83
test-bench-deps:
  sqlite-simple-interpolate: -any
  base: '>=4.7 && <5'
  sqlite-simple: -any
maintainer: ruby0b
synopsis: Interpolated SQLite queries via quasiquotation
changelog: |
  # Changelog

  ## 0.1.1

  * Add support for textual SQL injection (PR #1)
  * Support GHC 8.10.7

  ## 0.1.0

  * Initial version.
basic-deps:
  base: '>=4.5 && <5'
  sqlite-simple: '>=0.1'
  parsec: ^>=3.1
  mtl: '>=2.1 && <2.3'
  haskell-src-meta: '>=0.6 && <0.9'
  template-haskell: '>=2.16 && <2.19'
all-versions:
- '0.1'
- 0.1.1
author: ruby0b
latest: 0.1.1
description-type: markdown
description: |
  # `sqlite-simple-interpolate`

  Write natural SQL statements in Haskell using QuasiQuoters!

  ```haskell
  {-# LANGUAGE QuasiQuotes #-}

  module Main where

  import Control.Exception (bracket)
  import Data.Char (toLower)
  import Data.Function ((&))
  import qualified Database.SQLite.Simple as SQL
  import Database.SQLite.Simple.QQ.Interpolated

  table :: String
  table = "people"

  main :: IO ()
  main = bracket (SQL.open ":memory:") SQL.close $ \conn -> do
    conn & [iexecute|CREATE TABLE !{table} (name TEXT, age INTEGER)|]

    conn & [iexecute|INSERT INTO !{table} VALUES ("clive", 40)|]
    -- you can always use 'isql' directly but you'll have to use uncurry:
    (uncurry $ SQL.execute conn) [isql|INSERT INTO !{table} VALUES ("clara", 32)|]

    ageSum <- conn & [ifold|SELECT age FROM !{table}|] 0 (\acc (SQL.Only x) -> pure (acc + x))
    print (ageSum :: Int)

    let limit = 1 :: Int
    ages <- conn & [iquery|SELECT age FROM !{table} WHERE name = ${map toLower "CLIVE"} LIMIT ${limit}|]
    print (ages :: [SQL.Only Int])
  ```

  ## Acknowledgements
  This library is a fork of [`postgresql-simple-interpolate`](https://github.com/3noch/postgresql-simple-interpolate), adapted for use with `sqlite-simple`.

  The original itself is basically just a copy of the [`here` package](https://github.com/tmhedberg/here) by Taylor M. Hedberg with slight modifications!
license-name: BSD-3-Clause
