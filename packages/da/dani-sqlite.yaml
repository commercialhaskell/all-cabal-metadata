all-versions:
- 0.1.0.0
- 0.1.1.0
author: Daniel Díaz <diaz_carrete@yahoo.com>
basic-deps:
  base: '>=4.16.0.0 && <5'
  bytestring: '>=0.9.2.1 && <0.13'
  dani-sqlite: '>=0'
  text: '>=2.0 && <2.2'
changelog: "0.1.1.0\n=======\n\n- Bring back the 'Show' instance for 'Utf8', this
  time reusing 'ByteString''s Show instance.\n- 'FromRow' and 'ToRow' instances for
  'Generically', to allow for 'DerivingVia'.\n- Bring back compatibility with older
  GHCs.\n\n0.1.0.0\n=======\n\nSolo constructor -> MkSolo\n\nSQL -> Sql\n\nUse the
  same PreparedStatement and ColumnIndex types in SQLite and SQLite.Query.\n\nStatement
  renamed to PreparedStatement\n\nmoved the bindings modules and the direct module
  to their own public\nsublibraries.\n\nlibrary renamed to \"dani-sqlite\"\n\nrenamed
  \"Database\" to \"Connection\".\n\nincorporated fork of sqlite-simple!\n\nRemoved
  dependency on transformers.\n\nRemoved dependency on exceptions.\n\nfork!\n\npre-fork\n========\n\nv2.3.26:\n\t*
  Add support for GHC 8.8 and Stackage LTS 15+\n\nv2.3.25:\n\t* Upgrade embedded sqlite
  library to 3.28.0.\n\nv2.3.24:\n\t* Upgrade embedded sqlite3 library to 3.24.0.\n\t*
  Add faster `stepNoCB` function for statements that don't callback to Haskell functions.\n\t*
  Use faster \"unsafe\" FFI calls for the following functions:\n\t  reset, blobOpen,
  blobClose, blobReopen, blobRead, blobWrite, backupStep, errcode, errmsg\n\t  as
  they are frequently used and don't callback to Haskell functions.\n\t* Use faster
  Haskell memory allocator in blobRead function.\n\nv2.3.23:\n\t* Add Semigroup instance
  to support GHC 8.4.1 (thanks @gwils)\n\t* Build clean up for Android support (thanks
  @kmicklas)\n\nv2.3.22:\n\t* Update sqlite to 3.22.0\n\nv2.3.21\n\t* Update sqlite
  to 3.20.1\n\t* Add -DSQLITE_ENABLE_FTS5 to build options\n\nv2.3.20\n\t* Enable
  use of usleep (thanks @dbdbdb)\n\t* Add sqlite3.h and sqlite3ext.h to install-includes
  (thanks @duog)\n\nv2.3.19\n\t* Upgrade embedded sqlite3 library to 3.15.2.\n\nv2.3.18\n\t*
  Upgrade embedded sqlite3 library to 3.15.0.\n\n\t* Fix regressions in the test suite
  that were either introduced by changes\n\t  in GHC 8 and/or stuff we missed in previous
  releases.\n\nv2.3.17\n\t* Use a randomly created temp file for test database when
  running\n\tunit tests instead of a hardcoded file under 'dist/'.  Hopefully\n\tfixes
  https://github.com/IreneKnapp/direct-sqlite/issues/60\n\nv2.3.16\n\t* Add an Eq
  instance for SQLError\n\nv2.3.15\n\t* Add support for the online backup API\n\n\t*
  Add support for incremental blob I/O\n\n\t* Add support for zeroblobs\n\n\t* Add
  support for enabling/disabling the shared cache mode\n\n\t* Add low-level bindings
  to sqlite3_wal_hook\n\n\t* Add function for retrieving the db handle from a custom
  function\n\t  context.\n\n\t* Add bindings for sqlite3_errcode\n\n\t* Improve Travis
  CI coverage to cover more GHC versions (GHC 7.4 and higher)\n\n\t* Big thanks to
  Mario Titas and Marcin Tolysz for the above!\n\nv2.3.14\n\t* Add custom functions,
  aggregates and collations.\n\n\t* Upgrade the bundled SQLite3 library to 3.8.5.\n\n\t*
  Add bindings for controlling whether extension loading is\n\t  enabled or disabled.\n\n\t*
  Bump text and bytestring versions (actually, risking it and\n\t  removing upper
  bounds)\n\nv2.3.13\n\t* Add support for named parameters to queries.  Split this
  changelog into\n\t  a separate file (preserving its history).\n\nv2.3.12\n\t* Upgrade
  bundled SQLite3 to 3.8.4.1.\n\nv2.3.11\n\n\t* Add support for URI filenames, and
  default to having them\n\t  on. Among other things, this enables using in-memory
  databases.\n\nv2.3.10\n\n\t* Add support for compiling the bundled SQLite3 with
  URI filename\n\t  support. Specifying flags that would have affected the bundled\n\t
  \ SQLite3 no longer causes build failure if the \"systemlib\" flag\n\t  is specified.\n\nv2.3.9\n\n\t*
  Update bounds on the requirement on the \"text\" library.\n\nv2.3.8\n\n\t* Upgrade
  bundled SQLite3 to 3.8.1.\n\nv2.3.7\n\n\t* Fix a test failure related to 64-bit
  math on column indices.\n\nv2.3.6\n\n\t* Re-apply the stat64 hack after upgrade
  to the bundled\nSQLite3.  Oops!\n\nv2.3.5\n\n\t* Add support to compile bundled
  SQLite3 with full-text\n\t  search.  Upgrade bundled SQLite3 to 3.7.17.\n\nv2.3.4\n\n\t*
  Work around a linker error on some systems; add column-name\n\t  reporting.\n\nv2.3.3.1\n\n\t*
  Upgrade bundled SQLite3 to 3.7.15.2.\n\nv2.3.3\n\n\t* Add trace support, as a feature
  for debugging.\n\nv2.3.2\n\n\t* Add execPrint, execWithCallback, and interruptibly
  functions.\n\t  Add bindings for sqlite3_last_insert_rowid and sqlite3_changes.\n\t
  \ Change the Show instance of the Utf8 newtype to better match the\n\t  IsString
  instance.\n\nv2.3.1\n\n\t* Upgrade the bundled SQLite3 to 3.7.15.  Add bindings
  for\n\t  sqlite3_interrupt.  Export Int rather than CInt.\n\nv2.3\n\n\t* Mark some
  FFI calls \"unsafe\", for a substantial performance\n\t  benefit.\n\nv2.2.1\n\n\t*
  Bump down text library version to match with the latest Haskell\n\t  Platform.\n\nv2.2\n\n\t*
  Actually does what version 2.1 claimed to, since the author made\n\t  a mistake
  with git.\n\nv2.1\n\n\t* Improves handling of invalid UTF-8 and changes error handling
  to\n\t  be more complete.  It also adds a build flag to build against the\n\t  system
  sqlite instead of the bundled one, optionally\n\t  (disabled by default).\n\nv2.0\n\n\t*
  Uses Text for strings instead of String.\n\nv1.1.0.1\n\n\t* Switches to the Faction
  packaging system and makes\n\t  no other changes.\n\nv1.1\n\n\t* Adds the SQLite
  amalgamation file (version 3.7.5) to the\n\t  project, so that there are no external
  dependencies.\n"
changelog-type: markdown
description: "dani-sqlite\n============\n\nAn amalgamated fork of Irene Knapp's [direct-sqlite](https://github.com/IreneKnapp/direct-sqlite)
  and Janne Hellsten's [sqlite-simple](https://hackage.haskell.org/package/sqlite-simple).\n\n-
  Unlike **direct-sqlite**, it doesn't include the code for the C library, so\nyou'll
  have to install the library separately.\n\n  Example of `cabal.project.local` pointing
  to local libs on Windows:\n\n      package dani-sqlite\n          extra-include-dirs:
  C:/Users/somefolder/sqlite-amalgamation-3350300\n          extra-lib-dirs: C:/Users/somefolder/sqlite-dll-win64-x64-3350300\n\n-
  Requires SQLite >= 3.37.0.\n\n- Supports [`sqlite3_open_v2`](https://www.sqlite.org/c3ref/open.html).\n\n-
  Supports [extended result codes](https://www.sqlite.org/rescode.html).\n\n- Unlike
  **sqlite-simple**, this library doesn't have a time type.\n\n- Unlike **sqlite-simple**,
  this library doesn't have a quasiquoter.\n\nLinks\n=====\n\n- [FFI in the Haskell
  Report](https://www.haskell.org/onlinereport/haskell2010/haskellch8.html)\n\n- [Foreign
  function interface (FFI) in the GHC user guide](https://downloads.haskell.org/ghc/latest/docs/html/users_guide/exts/ffi.html)\n\n-
  [Using the latest version of SQLite with Haskell on Windows](https://danidiaz.medium.com/using-the-latest-version-of-sqlite-with-haskell-on-windows-1d6d4df2e683)\n\n-
  [Foreign Function Interface at the Haskellwiki](https://wiki.haskell.org/Foreign_Function_Interface)\n\n>
  I see very little reason to not use CApiFFI if your project doesn't need\nto work
  on old GHCs.\n\n- [Writing Haskell interfaces to C code: hsc2hs](https://downloads.haskell.org/ghc/latest/docs/html/users_guide/utils.html)\n\n-
  [Using_the_FFI](https://wiki.haskell.org/GHC/Using_the_FFI). \n\n- [Haskell/FFI](https://en.wikibooks.org/wiki/Haskell/FFI)\n\n-
  [hsctohs](https://www.reddit.com/r/haskell/comments/tthrq0/comment/i5dpir1/)\n\n-
  [Chapter 17. Interfacing with C: the FFI](http://book.realworldhaskell.org/read/interfacing-with-c-the-ffi.html)\n\n
  \ > the #const keyword hsc2hs provides [...] We can bind to the constants manually,
  by listing the CPP symbols for them using the #const keyword\n\n- [Writing Haskell
  interfaces to C code: hsc2hs](https://downloads.haskell.org/ghc/latest/docs/html/users_guide/utils.html?highlight=hsc2hs#writing-haskell-interfaces-to-c-code-hsc2hs)\n\n-
  [Converting between `CInt` and `Int`](https://www.reddit.com/r/haskell/comments/tthrq0/monthly_hask_anything_april_2022/i60rc8l/)\n\n
  \ > Does that mean that I should always use functions like fromIntegral to convert
  between CInt and Int/Integer?\n\n- [Videos about the Haskell FFI](https://twitter.com/DiazCarrete/status/1518325306448388096).\n\n-
  [`foreign import capi \"wrapper\"`](https://gitlab.haskell.org/ghc/ghc/-/issues/21532#note_428196)\n\n
  \ > While the Report isn't entirely clear on this, but my understanding is that
  the calling convention (e.g. ccall) in a foreign import ... \"wrapper\" indicates
  the calling convention that the resulting FunPtr should expect to be invoked with.
  If this is true then it's not obvious what foreign import capi \"wrapper\" should
  mean; afterall capi isn't really a calling convention. Rather, it just says \"delegate
  code generation for the call to the C compiler\". However, we can't delegate like
  this in for a \"wrapper\" import, since this would be akin to writing foreign export
  capi, which don't support.\n\n- [C-language Interface Specification for SQLite](https://www.sqlite.org/capi3ref.html)\n\n-
  [parameters](https://www.sqlite.org/lang_expr.html#varparam)\n\n  [The sqlite3_bind_parameter_name(P,N)
  interface returns the name of the N-th SQL parameter in the prepared statement P.](https://www.sqlite.org/c3ref/bind_parameter_name.html)\n\n
  \ [Return the index of an SQL parameter given its name. The index value returned
  is suitable for use as the second parameter to sqlite3_bind().](https://www.sqlite.org/c3ref/bind_parameter_index.html)\n\n-
  [Closing A Database Connection](https://www.sqlite.org/c3ref/close.html)\n\n  >
  Ideally, applications should finalize all prepared statements, close all BLOB handles,
  and finish all sqlite3_backup objects associated with the sqlite3 object prior to
  attempting to close the object.\n\nAcknowledgements\n================\n\n- Irene
  Knapp and the rest of contributors to [direct-sqlite](https://github.com/IreneKnapp/direct-sqlite).
  \n- Janne Hellsten and the rest of contributors to  [sqlite-simple](https://hackage.haskell.org/package/sqlite-simple).\n\n"
description-type: markdown
hash: dc238148727ebb9dff724f0bf39c782bbbd4ca6e13862f18e6154ee781d9a39f
homepage: https://github.com/danidiaz/dani-sqlite
latest: 0.1.1.0
license-name: BSD-3-Clause
maintainer: Daniel Díaz
synopsis: SQLite client library.
test-bench-deps:
  base: '>=0'
  base16-bytestring: '>=0'
  bytestring: '>=0.9'
  dani-sqlite: '>=0'
  directory: '>=0'
  tasty: '>=1.4.2.1'
  tasty-hunit: '>=0.10.0.3'
  temporary: '>=0'
  text: '>=0'
