homepage: ''
changelog-type: markdown
hash: a16fef2f72537214871cbdf4a4148542951318651e5d76e4f50293b522c0790a
test-bench-deps: {}
maintainer: hvr@gnu.org
synopsis: Library and utility for processing cabal's plan.json file
changelog: |
  # Revision history for `cabal-plan`

  ## 0.6.1.0

  ### `lib:cabal-plan` Library

  No changes

  ### `exe:cabal-plan` Executable

  * `dot` command got new options
      * `--root` to limit graph to specific roots
      * `--output` to write directly to some file
      * `--run-dot-png` and `--run-dot-pdf` to run `dot` for you

  * `cabal-plan` executable depends on `optics-core` instead of `lens`.
    Therefore is buildable only with GHC-8.0+

  ## 0.6.0.0

  ### `lib:cabal-plan` Library

  * `ExactPath` constructor to skip `find` in `findAndDecodePlanJson`.
    (Note: see also `decodePlanJson`)


  ### `exe:cabal-plan` Executable

  * `--plan-json` for exact `plan.json` location
  * `--relative` search for project root relative to that directory
  * `--colors=auto|never|always` flag
  * `tred` command to print transtive reduction of dependency graph
  * `diff` command to compare two plans
  * `list-bins` prints full selector "pkg:type:name", i.e. includes package name

  ## 0.5.0.0

  ### `lib:cabal-plan` Library

  * New `dispCompNameTarget` function for pretty-printing `CompName`s in cabal's target-selector syntax.
  * Add support for cabal 2.4's `pkg-src` package provenience metadata.
  * Add support for cabal 2.4.1's `pkg-cabal-sha256` package description checksum field.

  ### `exe:cabal-plan` Executable

  * Add support for including package description checksums in `fingerprint` output
  * Add support for printing flag selection in `topo` output
  * Fail gracefully in `license-report` when metadata cannot be found in index

  ## 0.4.0.0

  ### `lib:cabal-plan` Library

  * New `SearchPlanJson` type to specify strategy for locating `plan.json`
  * Add `SearchPlanJson` parameter to `findAndDecodePlanJson` function and change return type
  * Expose separate `findProjectRoot` operation

  ### `exe:cabal-plan` Executable

  * New command `license-report` (requires Cabal flag `license-report` to be active)

  ## 0.3.0.0

  ### `lib:cabal-plan` Library

  * Add support for foreign-lib components.
  * Add support for `dist-dir` `plan.json` field.
  * Make `Sha256` type abstract and add new `sha256{To,From}ByteString`
    conversion functions, as well as the new `parseSha256` function.
  * Introduce `FlagName` newtype.
  * Add `FromJSONKey`/`ToJSONKey` instances for `UnitId`, `PackageName`, and `PkgId`.

  ### `exe:cabal-plan` Executable

  * smart completer for list-bin/list-bins pattern
  * new command `topo` (printing out topographic sorting of install-plan)
  * `dot` prints component dependency graph. New options:
      - `--tred` transitive reduction
      - `--tred-weights` Adjust edge thickness during transitive reduction
      - `--path-from pkgA --path-from pkgB` Highlight dependency paths from *pkgA* to *pkgB*
      - `--revdep pkg` highlight reverse dependencies of pkg in the install plan

  ## 0.2.0.0

  * Add an optional `--builddir` argument to all commands and to `findAndDecodePlanJson` function.
  * Add experimental support for underlining.
  * Reimplement CLI with `optparse-applicative`.
  * Add new sub-command `list-bins` and change semantics of existing `list-bin` sub-cmd.

  ### 0.1.1.0

  * Add `cabal-plan fingerprint` command for printing
    sha256 sums of source tarballs.

  ## 0.1.0.0

  * First version. Released on an unsuspecting world.
basic-deps:
  optics-core: ^>=0.1 || ^>=0.2
  singleton-bool: ^>=0.1.4
  semialign: ^>=1 || ^>=1.1
  bytestring: ! '>=0.10.0 && <0.11'
  these: ^>=1
  process-extras: ^>=0.7.4
  base: ! '>=4.6 && <4.14'
  text: ! '>=1.2.2 && <1.3'
  filepath: ^>=1.3.0 || ^>=1.4.0
  parsec: ^>=3.1.11
  containers: ! '>=0.5.0 && <0.6 || >=0.6.0.1 && <0.7'
  ansi-terminal: ^>=0.9 || ^>=0.10
  base-compat: ^>=0.10.5 || ^>=0.11
  mtl: ^>=2.2.1
  topograph: ^>=1
  base16-bytestring: ^>=0.1.1
  transformers: ^>=0.3.0.0 || ^>=0.4.2.0 || ^>=0.5.2.0
  cabal-plan: -any
  optparse-applicative: ^>=0.15.0.0
  aeson: ^>=1.2.0 || ^>=1.3.0 || ^>=1.4.0.0
  vector: ^>=0.12.0.1
  directory: ! '>=1.2.0 && <1.3 || >=1.3.0 && <1.4'
all-versions:
- 0.1.0.0
- 0.1.1.0
- 0.2.0.0
- 0.3.0.0
- 0.4.0.0
- 0.5.0.0
- 0.6.0.0
- 0.6.1.0
author: Herbert Valerio Riedel
latest: 0.6.1.0
description-type: haddock
description: |-
  This package provides a library (see "Cabal.Plan") for decoding @plan.json@ files as
  well as the simple tool @cabal-plan@ for extracting and pretty printing
  the information contained in the @plan.json@ file.

  @plan.json@ files are generated by [cabal](https://hackage.haskell.org/package/cabal-install)'s [Nix-style local builds](http://cabal.readthedocs.io/en/latest/nix-local-build.html) and contain detailed information about the build/install plan computed by the cabal solver.

  == @cabal-plan@ utility

  The @cabal-plan@ executable (enabled via the @exe@ cabal flag) provides various operations:

  [info] Show basic report of dependency tree
  [show] Dump 'PlanJson' data-structure via 'Show' instance
  [tred] Show dependency tree as a graph
  [diff] Diff two install plans
  [list-bins] List all binaries
  [list-bin] List single binary (useful for scripting, e.g. @cabal list-bin exe:cabal-plan@)
  [fingerprint] Print SHA256 sums of dependencies' source tarballs and cabal files
  [dot] Generate graph of dependencies in @.dot@ format
  [topo] Print plan topologically sorted
  [license-report] Generate license report for a component (only available when built with @license-report@ flag enabled); see <src/example/cabal-plan.md report example for cabal-plan> (<src/example/cabal-plan.html Pandoc rendered HTML>)

  See also ["New things in Haskell package QA" Blogpost](http://oleg.fi/gists/posts/2018-01-08-haskell-package-qa.html) for a description of the @topo@ and @dot@ operations as well as how to enable tab-completion.
license-name: GPL-2.0-or-later
