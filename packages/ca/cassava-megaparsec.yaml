homepage: https://github.com/stackbuilders/cassava-megaparsec
changelog-type: markdown
hash: 3c9cd9b7149937d1fba3934d641888ee239233fe28d35ecb26ed721aee79913a
test-bench-deps:
  bytestring: '>=0.9 && <0.12'
  base: '>=4.10 && <5.0'
  hspec: '>=2.0 && <3.0'
  cassava: '>=0.4.2 && <0.6'
  hspec-megaparsec: '>=2.0 && <3.0'
  vector: '>=0.11 && <0.13'
  cassava-megaparsec: -any
maintainer: Mark Karpov <markkarpov92@gmail.org>
synopsis: Megaparsec parser of CSV files that plays nicely with Cassava
changelog: |
  ## Cassava Megaparsec 2.1.0

  * Drop support for GHC 8.0 and below

  ## Cassava Megaparsec 2.0.4

  * Allow bytestring-0.11

  ## Cassava Megaparsec 2.0.3

  * Exposing Internals

  ## Cassava Megaparsec 2.0.2

  * Add suppport for `megaparsec-9.0.0`

  ## Cassava Megaparsec 2.0.1

  * Add suppport for `megaparsec-8.0.0`

  ## Cassava Megaparsec 2.0.0

  * Works with Megaparsec 7.

  ## Cassava Megaparsec 1.0.0

  * Works with Megaparsec 6.

  * Instead of `Cec` we have `ConversionError` as custom component of error
    messages.

  ## Cassava Megaparsec 0.1.0

  * Initial release.
basic-deps:
  bytestring: '>=0.9 && <0.12'
  base: '>=4.10 && <5.0'
  unordered-containers: '>=0.2.7 && <0.3'
  megaparsec: '>=7.0 && <10.0'
  cassava: '>=0.4.2 && <0.6'
  vector: '>=0.11 && <0.13'
all-versions:
- 0.1.0
- 1.0.0
- 2.0.0
- 2.0.1
- 2.0.2
- 2.0.3
- 2.0.4
- 2.1.0
author: Mark Karpov <markkarpov92@gmail.org>
latest: 2.1.0
description-type: markdown
description: "# Cassava Megaparsec\n\n[![License MIT](https://img.shields.io/badge/license-MIT-brightgreen.svg)](http://opensource.org/licenses/MIT)\n[![Hackage](https://img.shields.io/hackage/v/cassava-megaparsec.svg?style=flat)](https://hackage.haskell.org/package/cassava-megaparsec)\n[![Stackage
  Nightly](http://stackage.org/package/cassava-megaparsec/badge/nightly)](http://stackage.org/nightly/package/cassava-megaparsec)\n[![Stackage
  LTS](http://stackage.org/package/cassava-megaparsec/badge/lts)](http://stackage.org/lts/package/cassava-megaparsec)\n![Build
  Status](https://github.com/stackbuilders/cassava-megaparsec/actions/workflows/build.yml/badge.svg)\n\nThe
  package provides alternative parser for the\n[Cassava](https://hackage.haskell.org/package/cassava)
  package written with\n[Megaparsec](https://hackage.haskell.org/package/megaparsec)
  so you can get\nbetter error messages at expense of some speed.\n\n## Quick start\n\nThe
  package works seamlessly with Cassava by replacing the following\nfunctions:\n\n*
  `decode`\n* `decodeWith`\n* `decodeByName`\n* `decodeByNameWith`\n\nThe functions
  work just the same as Cassava's equivalents, but also take\nname of file they parse
  (to include into error messages) and return typed\nhigh-quality error messages produced
  by\n[Megaparsec](https://hackage.haskell.org/package/megaparsec).\n\nThe import
  section typically looks like this:\n\n```haskell\nimport Data.Csv hiding (decode,
  decodeWith, decodeByName, decodeByNameWith)\nimport Data.Csv.Parser.Megaparsec (decode,
  decodeWith, decodeByName, decodeByNameWith)\n```\n\nNext you call appropriate function
  and get either result of parsing\nidentical to that of Cassava or error message.
  The error message is\nwell-typed so you can examine it in Haskell code easily. Conversion
  error\nare considered parsing errors by the `cassava-megaparsec` package and are\nreported
  via custom error message component `Cec` supported by Megaparsec 5.\nSince Cassava's
  conversion errors are plain strings, we have no choice but\nto represent them as
  strings too:\n\n```haskell\n-- | Custom error component for CSV parsing. It allows
  typed reporting of\n-- conversion errors.\n\ndata Cec\n  = CecFail String\n  | CecIndentation
  Ordering Pos Pos\n  | CecConversionError String\n  deriving (Eq, Data, Typeable,
  Ord, Read, Show)\n```\n\nTo pretty print a error message use the `parseErrorPretty`
  function from\n`Text.Megaparsec`.\n\nThis should be enough to start using the package,
  please consult Haddocks\nfor detailed per-function documentation.\n\n## License\n\nMIT,
  see [the LICENSE file](LICENSE).\n\n## Contributing\n\nDo you want to contribute
  to this project? Please take a look at our [contributing guideline](/docs/CONTRIBUTING.md)
  to know how you can help us build it.\n\n---\n<img src=\"https://cdn.stackbuilders.com/media/images/Sb-supports.original.png\"
  alt=\"Stack Builders\" width=\"50%\"></img>  \n[Check out our libraries](https://github.com/stackbuilders/)
  | [Join our team](https://www.stackbuilders.com/join-us/)\n"
license-name: MIT
