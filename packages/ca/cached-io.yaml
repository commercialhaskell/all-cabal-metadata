homepage: ''
changelog-type: markdown
hash: 54c00768507ed79437fc9f35fa850e17ccdbbdd118a76d2274081b698c909acd
test-bench-deps: {}
maintainer: Bellroy Tech Team <haskell@bellroy.com>
synopsis: A simple library to cache IO actions
changelog: |
  # Revision history for cached-io

  ## 1.2.0.0

  Thank you [glasserc](https://github.com/glasserc) for your work on previous versions, and a special thanks to
  [Arguggi](https://github.com/Arguggi) for contributing many of the improvements incorporated into this
  version.

  - [Bellroy](https://github.com/bellroy) is the new maintainer of this package. See https://github.com/glasserc/haskell-cached-io/pull/1.
  - New `cachedIO'` and `cachedIOWith'` support generating an action depending on the most recent cached value and its timestamp, if there was one.
  - `cachedIO ttl f` can now be run in a different monad to `f`. Similarly for `cachedIO'`, `cachedIOWith`, `cachedIOWith'`.
  - Fixes uncaught exceptions leaving the cache in a deadlocked state and other problems.

  ## 1.1.0.0 and prior

  These versions were published by [glasserc](https://github.com/glasserc).
basic-deps:
  exceptions: '>=0.10.4 && <0.11'
  stm: '>=2.5 && <2.6'
  base: '>=4.13.0.0 && <4.18'
  time: '>=1.9.3 && <1.13'
  transformers: '>=0.5.6.2 && <0.7'
  cached-io: -any
all-versions:
- 0.1.0.1
- 0.1.1.0
- 1.1.0.0
- 1.2.0.0
author: SumAll, Inc.
latest: 1.2.0.0
description-type: markdown
description: |
  # cached-io: cache a single IO action

  Sometimes you have an action that does something really expensive
  whose results don't change that much. This is a simple library that
  lets you cache the output of that expensive action for a
  developer-specified length of time.

  `test/test-cachedIO.hs` shows a very basic usage example.

  ## Developing this library

  All standardised tooling is provided by `flake.nix`.

  ```shell
  nix develop
  ```

  ### Formatting code

  | To format | use                                                                                          |
  | --------- | -------------------------------------------------------------------------------------------- |
  | `*.cabal` | [`cabal-fmt`](https://hackage.haskell.org/package/cabal-fmt) (`cabal-fmt --inplace *.cabal`) |
  | `*.nix`   | [`nixpkgs-fmt`](https://github.com/nix-community/nixpkgs-fmt) (`nixpkgs-fmt *.nix`)          |

  We have not yet chosen a formatter for Haskell source. For now, try to follow
  the style of surrounding code.

  ### CI

  The GitHub Actions CI workflow for this repo is generated by [`haskell-ci`](https://github.com/haskell-CI/haskell-ci):

  ```shell
  haskell-ci regenerate
  ```
license-name: Apache-2.0
