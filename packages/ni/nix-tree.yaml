homepage: https://github.com/utdemir/nix-tree
changelog-type: markdown
hash: 05d6806669cc77aad3b88b86f0c2aef6a9f0fdbaa8b3367379f6e4d188fbb6fc
test-bench-deps:
  bytestring: -any
  base: '>=4.11 && <5'
  unordered-containers: -any
  text: -any
  clock: -any
  vty: -any
  filepath: -any
  hedgehog: -any
  hrfsize: -any
  containers: -any
  relude: -any
  typed-process: -any
  hashable: -any
  transformers: -any
  deepseq: -any
  aeson: -any
  brick: '>=0.64'
  directory: -any
maintainer: Utku Demir
synopsis: Interactively browse a Nix store paths dependencies
changelog: |
  # Changelog

  ## 0.1.9 - 2021-11-08:

  * fix: Automatically enable the required 'nix-command' experimental feature on Nix >= 2.4
  * fix: Do not refresh screen periodically unless necessary

  ## 0.1.8 - 2021-09-06:

  * fix: Reduce idle CPU use
  * fix: Put a timeout on yank command
  * fix: Various performance improvements

  ## 0.1.7 - 2021-03-28

  * feat: Ability to yank selected store path to clipboard (shortcut: 'y')
  * fix: Try to respect terminals color scheme (thanks @kanashimia)

  ## 0.1.6 - 2021-03-12

  * feat: Support non standard Nix store locations
  * feat: Horizontal scrolling on why-depends window

  ## 0.1.5 - 2021-03-03

  * feat: Add sort order toggle.
  * fix: Search now does not contain false-positives.

  ## 0.1.4 - 2021-02-23

  * feat: Make search case insensitive.
  * fix: Can close the help modal now.

  ## 0.1.3.1 - 2021-01-07

  * fix: Correctly pass --derivation flag to Nix >= 2.4

  ## 0.1.3.0 - 2020-12-22

  * feat: Ability to work on .drv files.

  ## 0.1.2.0 - 2020-09-15

  * feat: Add --version flag
  * fix: Can search the letter 'q' without closing the search modal.

  ## 0.1.1.0 - 2020-08-23

  * feat: Seach functionality.
basic-deps:
  bytestring: -any
  base: '>=4.11 && <5'
  unordered-containers: -any
  text: -any
  clock: -any
  vty: -any
  filepath: -any
  async: -any
  hrfsize: -any
  containers: -any
  relude: -any
  typed-process: -any
  hashable: -any
  terminal-progress-bar: -any
  transformers: -any
  deepseq: -any
  aeson: -any
  brick: '>=0.64'
  directory: -any
all-versions:
- 0.1.0.0
- 0.1.1.0
- 0.1.2.0
- 0.1.3.0
- 0.1.3.1
- 0.1.4
- 0.1.5
- 0.1.6
- 0.1.7
- 0.1.8
- 0.1.9
author: Utku Demir
latest: 0.1.9
description-type: markdown
description: |
  # nix-tree

  ![Build Status](https://github.com/utdemir/nix-tree/workflows/nix-build/badge.svg)
  [![Packaging status](https://repology.org/badge/vertical-allrepos/haskell:nix-tree.svg)](https://repology.org/project/haskell:nix-tree/versions)

  Interactively browse dependency graphs of Nix derivations.

  [![asciicast](https://asciinema.org/a/cnilbmPXW51g97hdNJZcM5F6h.svg)](https://asciinema.org/a/cnilbmPXW51g97hdNJZcM5F6h)

  ## Installation

  `nix-tree` is on `nixpkgs` since `20.09`, so just use your preferred method for adding packages to your system, eg:

  ```
  nix-env -i nix-tree
  ```

  To run the current development version:

  ```
  nix-shell -p '(import (builtins.fetchTarball "https://github.com/utdemir/nix-tree/archive/main.tar.gz") {}).nix-tree' --run nix-tree
  ```

  Or, if you use a Nix version with flake support:

  ```
  nix run github:utdemir/nix-tree
  ```

  ## Usage

  ```
  $ nix-tree --help
  Usage: nix-tree [paths...] [-h|--help] [--version]
    Paths default to $HOME/.nix-profile and /var/run/current-system.
  Keybindings:
    hjkl/Arrow Keys : Navigate
    w               : Open why-depends mode
    /               : Open search mode
    s               : Change sort order
    y               : Yank selected path to clipboard
    ?               : Show help
    q/Esc:          : Quit / close modal
  ```

  ### Glossary

  * **NAR Size**: Size of the store path itself.
  * **Closure size**: Total size of the store path and all its transitive dependencies.
  * **Added size**:  Size of the store path, and all its _unique_ transitive
    dependencies. In other words, the cost of having that store path on top
    of all other paths. See [issue #14] for a better explanation.

  [issue #14]: https://github.com/utdemir/nix-tree/issues/14

  ### Tips

  `nix-build` prints built paths to stdout, which can be piped conveniently
  with `| xargs -o nix-tree`. Examples:

  ```bash
  # Output of a local derivation
  nix-build . --no-out-link | xargs -o nix-tree

  # Build time dependencies (passing a `.drv` path)
  nix-instantiate --no-out-link | xargs -o nix-tree

  # Dependencies from shell.nix
  nix-build shell.nix -A inputDerivation | xargs -o nix-tree

  # All outputs of a derivation in nixpkgs:
  nix-build '<nixpkgs>' -A openssl.all --no-out-link | xargs -o nix-tree
  ```

  ## Contributing

  All contributions, issues and feature requests are welcome.

  To hack on it, simply run `nix-shell` and use `cabal` as usual. Please run `./format.sh` before sending a PR.

  ## Related tools

  * [nix-du](https://github.com/symphorien/nix-du)
  * [nix-query-tree-viewer](https://github.com/cdepillabout/nix-query-tree-viewer)
  * [nix-visualize](https://github.com/craigmbooth/nix-visualize)
license-name: BSD-3-Clause
