homepage: https://github.com/juhp/ostree-pin
changelog-type: markdown
hash: f83493195081d194ab38c581272a6c4f517b167cb3e40088c39b1c1c5965d892
test-bench-deps: {}
maintainer: Jens Petersen <juhpetersen@gmail.com>
synopsis: Tool to re-pin ostree deployments
changelog: |
  # Changelog

  ## 0.1 (2023-10-30)
  - initial release
basic-deps:
  unix: -any
  gi-gio: -any
  base: <5
  simple-cmd-args: -any
  gi-ostree: '>=1.0.18'
all-versions:
- '0.1'
author: Jens Petersen <juhpetersen@gmail.com>
latest: '0.1'
description-type: markdown
description: |
  # ostree-pin
  [![Hackage](https://img.shields.io/hackage/v/ostree-pin.svg)](https://hackage.haskell.org/package/ostree-pin)
  [![GPL-3 license](https://img.shields.io/badge/license-GPL--3-blue.svg)](LICENSE)

  ## Summary
  A small utility to "pin" the current ostree deployment.
  eg useful on Fedora Silverblue for preserving
  the current booted deployment image.
  The idea is to run this before booting into a new staged deployment.

  ## Help
  `$ ostree-pin --help`
  ```
  Tool to update pinned ostree deployment

  Usage: ostree-pin [--version] [-n|--dryrun] [-p|--rollback]

    See https://github.com/juhp/ostree-pin#readme

  Available options:
    -h,--help                Show this help text
    --version                Show version
    -n,--dryrun              Dry run
    -p,--rollback            Pin previous (rollback) deployment
  ```

  ## Install
  Needs the Fedora `ostree-devel` package (or better `ghc-gi-ostree-devel`)
  or `libostree-dev` (Debian/Ubuntu). Also needs ghc and cabal-install (or stack).
  ```
  $ cabal install
  ```
  or from git:
  ```
  $ stack install
  ```

  ## Usage
  ```
  $ sudo ostree-pin
  ```
  Sets the current deployment to pinned,
  and unpins the previously pinned deployment.
  If more than one deployment was pinned it doesn't touch them.

  ## Contribute
  ostree-pin is distributed under the GPL license version 3 or later.

  Contributions are welcome at <https://github.com/juhp/ostree-pin>
license-name: GPL-3.0-only
