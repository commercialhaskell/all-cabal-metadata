homepage: http://github.com/lyokha/nginx-healthcheck-plugin
changelog-type: markdown
hash: 502fb7df4e63bf9fb37915c096e52c87a330ca0425c3da13c94c65753805118e
test-bench-deps: {}
maintainer: Alexey Radkov <alexey.radkov@gmail.com>
synopsis: Active health checks and monitoring of Nginx upstreams
changelog: |+
  ### 1.6.2

  - Fixed validation of server certificates by name (versions *1.6* and *1.6.1*
    had no chance to work with *https* as it was expected because of this bug).
  - *New feature*: take the host name from the bound server name in the Nginx
    upstream configuration when the service key ends with a slash and this is the
    only slash inside it.
    + **Breaking changes**: internal Haskell/C interoperability protocol has
      changed which requires rebuilding of the C plugin.

  ### 1.6.1

  - Extract host names from service keys and use them in header *Host* and for
    validation of server certificates in health checks over *https*.
  - Conditional building of the *https* support controlled by Cabal flag
    *HealthcheckHttps*.

  ### 1.6

  - Added support for *https* transport protocol.
    + **Breaking changes**: endpoint configuration gets a new field *epProto*,
      see updated examples in the project's *README.md*.
  - A new approach to building custom handlers with Cabal Nix-style local builds
    and [*ngx-export-distribution*](https://hackage.haskell.org/package/ngx-export-distribution),
    see details in the project's *simple/*, *periodic/*, and *prometheus/*
    subdirectories.
  - Improvement: using a single http manager for all service keys.

  ### 1.5

  - Refactoring of type imports.

basic-deps:
  http-client: -any
  bytestring: -any
  crypton-x509-validation: -any
  base: '>=4.8 && <5'
  data-default-class: -any
  time: -any
  unordered-containers: -any
  text: -any
  http-client-brread-timeout: -any
  ngx-export: '>=1.7.1'
  enclosed-exceptions: -any
  tls: '>=1.4.0'
  async: -any
  crypton-connection: -any
  containers: -any
  crypton-x509-system: -any
  snap-server: -any
  crypton-x509: -any
  snap-core: -any
  http-client-tls: '>=0.3.4'
  http-types: -any
  aeson: '>=1.0.0.0'
  safe: -any
  vector: -any
all-versions:
- '1.5'
- '1.6'
- 1.6.1
- 1.6.2
author: Alexey Radkov <alexey.radkov@gmail.com>
latest: 1.6.2
description-type: haddock
description: |-
  Active health checks and monitoring of Nginx upstreams.

  This is a part of <https://github.com/lyokha/nginx-healthcheck-plugin>.
  Custom libraries are required to be linked against C module
  /ngx_healthcheck_plugin/.
license-name: BSD-3-Clause
