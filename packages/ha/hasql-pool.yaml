all-versions:
- '0.1'
- '0.3'
- '0.4'
- 0.4.1
- 0.4.2
- 0.4.2.1
- 0.4.3
- 0.4.3.1
- '0.5'
- 0.5.0.1
- 0.5.0.2
- 0.5.1
- 0.5.2
- 0.5.2.2
- '0.6'
- 0.6.0.1
- '0.7'
- 0.7.1
- 0.7.1.1
- 0.7.1.2
- 0.7.1.3
- 0.7.2
- 0.7.2.1
- '0.8'
- 0.8.0.1
- 0.8.0.2
- 0.8.0.3
- 0.8.0.4
- 0.8.0.5
- 0.8.0.6
- 0.8.0.7
- '0.9'
- 0.9.0.1
- '0.10'
- 0.10.0.1
- 0.10.1
- '1'
- 1.0.0.1
- 1.0.1
- '1.1'
- '1.2'
- 1.2.0.1
- 1.2.0.2
- 1.2.0.3
- '1.3'
- 1.3.0.1
- 1.3.0.2
- 1.3.0.3
- 1.3.0.4
- '1.4'
author: Nikita Volkov <nikita.y.volkov@mail.ru>
basic-deps:
  base: '>=4.11 && <5'
  bytestring: '>=0.10 && <0.14'
  hasql: '>=1.10 && <1.11'
  stm: '>=2.5 && <3'
  text: '>=1.2 && <3'
  time: '>=1.9 && <2'
  uuid: '>=1.3 && <2'
changelog: |
  # 1.4

  - Migrated to `hasql-1.10`
  - Updated connection settings API to use monoid-based `Settings` instead of list-based `[Setting]`
  - Updated error types to use `Hasql.Errors` module instead of `Hasql.Session` and `Hasql.Connection`
  - Changed session execution API from `Session.run session connection` to `Connection.use connection session`
  - Error handling now uses `ConnectionSessionError` for connection-level issues instead of `ClientError`
  - Updated statement construction to use `Statement.preparable` and `Statement.unpreparable` instead of direct constructor
  - Hid the `Defaults` module from the public API

  # 1.3

  - Adapt to the new settings model of `hasql-1.9`

  # 1.2

  - Migrated to `hasql-1.7`
  - Changed references to `QueryError` in observations to `SessionError`

  # 1.1

  - `ReadyForUseConnectionStatus` got extended with the `ConnectionReadyForUseReason` details.
  - `initSession` setting added.

  # 1

  - Optional observability event stream added. Provides a flexible mechanism for monitoring the healthiness of the pool via logs and metrics.
  - Configuration got isolated into a DSL, which will allow to provide new configurations without breaking backward compatibility.

  # 0.10.1

  - Avoid releasing connections on exceptions thrown in session

  # 0.9

  - Maximal lifetime added for connections. Allows to refresh the connections in time cleaning up the resources.

  Breaking:

  - The acquisition timeout is now non-optional.
  - Moved to `DiffTime` for timeouts.

  # 0.8.0.7

  Fix excessive connections during releases due to race conditions.

  # 0.8.0.5

  Fix connections not returning to the pool on exceptions.

  # 0.8.0.2

  Fixed Windows build.

  # 0.8

  `release` became reusable. You can use it to destroy the whole pool (same as before), but now also you can use it to reset the connections.

  Acquisition timeout added.

  Breaking changes in API:

  - Removed `PoolIsReleasedUsageError`
  - `acquire` extended with the acquisition timeout parameter
  - `acquireDynamically` extended with the acquisition timeout parameter

  # 0.7.2

  Added support for dynamic connection configuration ([issue #11](https://github.com/nikita-volkov/hasql-pool/issues/11)).

  # 0.7.1.2

  Fixed connections not being released if they were in use during the call to `release`.

  # 0.7.1

  Added `Exception` for `UsageError`.

  # 0.7

  Simplified the implementation a lot by removing the notion of timeout.

  Breaking:
  - Removed the `Settings` type
  - Changed the signature of `acquire`

  # 0.6

  Moved away from "resource-pool" and fixed the handling of lost connections.

  Breaking:

  - Changed the suffix of `UsageError` constructors from `Error` to `UsageError`
  - Added `PoolIsReleasedUsageError`
changelog-type: markdown
description: ''
description-type: haddock
hash: 888ed019acd1ac963ffd7d477cf9b953f422574057da90f05ec99f036c43b1be
homepage: https://github.com/nikita-volkov/hasql-pool
latest: '1.4'
license-name: MIT
maintainer: Nikita Volkov <nikita.y.volkov@mail.ru>
synopsis: Pool of connections for Hasql
test-bench-deps:
  async: '>=2.2 && <3'
  hasql: '>=0'
  hasql-pool: '>=0'
  hspec: '>=2.6 && <3'
  postgresql-libpq: '>=0.10 && <0.12'
  random: '>=1.2 && <2'
  rerebase: '>=1.15 && <2'
  testcontainers-postgresql: '>=0.2 && <0.3'
  text-builder: '>=1 && <1.1'
  tuple: ^>=0.3.0.2
