all-versions:
- '0.1'
- 0.1.0.1
author: Nikita Volkov <nikita.y.volkov@mail.ru>
basic-deps:
  base: '>=4.11 && <5'
  hasql: ^>=1.10.1
  postgresql-types-algebra: ^>=0.1
  ptr-peeker: ^>=0.1.0.1
  ptr-poker: ^>=0.1.3
  tagged: ^>=0.8.9
  text-builder: ^>=1.0.0.4
changelog: ''
changelog-type: ''
description: |
  # hasql-postgresql-types

  [![Hackage](https://img.shields.io/hackage/v/hasql-postgresql-types.svg)](https://hackage.haskell.org/package/hasql-postgresql-types)
  [![Continuous Haddock](https://img.shields.io/badge/haddock-master-blue)](https://nikita-volkov.github.io/hasql-postgresql-types/)

  Integration of ["hasql"](https://github.com/nikita-volkov/hasql) with ["postgresql-types"](https://github.com/nikita-volkov/postgresql-types) via the `IsScalar` typeclass from ["postgresql-types-algebra"](https://github.com/nikita-volkov/postgresql-types-algebra).
  Provides automatic encoder and decoder generation for precise PostgreSQL scalar types.

  ## Motivation

  The standard "hasql" codecs use common Haskell types like `Text`, `DiffTime`, `UTCTime`, etc. However these types do not always map precisely to PostgreSQL types. E.g., the PostgreSQL `interval` type carries information about months, years and microseconds, while the Haskell `DiffTime` type only represents a time difference in picoseconds. Such mismatches can lead to data loss or unexpected behavior. The ["postgresql-types"](https://github.com/nikita-volkov/postgresql-types) library addresses such issues by providing precise Haskell representations for PostgreSQL types. This package integrates it with "hasql". It also provides a class-based polymorphic interface for defining "hasql" `Value` codecs.

  ## Usage

  ```haskell
  import Hasql.PostgresqlTypes (encoder, decoder)
  import qualified PostgresqlTypes as Pt
  import qualified Hasql.Statement as Statement
  import qualified Hasql.Encoders as Encoders
  import qualified Hasql.Decoders as Decoders

  myStatement :: Statement.Statement Pt.Timestamptz [Pt.Timestamptz]
  myStatement = Statement.preparable sql enc dec
    where
      sql = "SELECT $1::timestamptz"
      enc = Encoders.param (Encoders.nonNullable encoder)
      dec = Decoders.rowList (Decoders.column (Decoders.nonNullable decoder))
  ```
description-type: markdown
hash: 16981211815c2ca75760f0d511b6d99654cb33617890993bbe3bda74aae7eef8
homepage: https://github.com/nikita-volkov/hasql-postgresql-types
latest: 0.1.0.1
license-name: MIT
maintainer: Nikita Volkov <nikita.y.volkov@mail.ru>
synopsis: Integration of "hasql" with "postgresql-types"
test-bench-deps: {}
