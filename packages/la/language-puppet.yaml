homepage: http://lpuppet.banquise.net/
changelog-type: text
hash: 99a193660d374996c4a17f628ace2f049d6f9a272f0bebc20bab72d2575469ae
test-bench-deps:
  base: -any
  strict-base-types: -any
  unordered-containers: -any
  hspec: -any
  text: -any
  megaparsec: -any
  protolude: -any
  lens: -any
  hslogger: -any
  mtl: -any
  hspec-megaparsec: -any
  transformers: -any
  language-puppet: -any
  temporary: -any
  scientific: -any
  pcre-utils: -any
  Glob: -any
  vector: -any
maintainer: bartavelle@gmail.com
synopsis: Tools to parse and evaluate the Puppet DSL.
changelog: ! "language-puppet (1.3.18) UNRELEASED; urgency=medium\n\n  * Added prefix
  and suffix functions (Fix #246)\n\n -- Simon Marechal <bartavelle@gmail.com>  Fri,
  18 May 2018 11:42:19 +0200\n\nlanguage-puppet (1.3.17) artful; urgency=medium\n
  \ * Loose upperbound for servant to include 0.13\n  * Loose upperbound for exceptions
  to include 0.10.0\n  * Fix #241\n\n -- Simon Marechal <bartavelle@gmail.com> UNRELEASED\n\nlanguage-puppet
  (1.3.16) artful; urgency=medium\n  [ PierreR ]\n  * Fix #213 Hash lookup failing
  in erb template\n\n -- Simon Marechal <bartavelle@gmail.com>  Thu, 01 Mar 2018 17:48:48
  +0100\n\nlanguage-puppet (1.3.15) artful; urgency=medium\n\n  * Improve parsing
  error messages\n  * Improve source position display\n  * Support OS X via filecache-0.3\n
  \ * Add ability to use the json ruby module in erbs\n\n -- Bartavelle <bartavelle@gmail.com>
  \ Sun, 18 Feb 2018 20:40:57 +0100\n\nlanguage-puppet (1.3.14) xenial; urgency=medium\n\n
  \ * Allow declaring type of variables during assignment\n  * The `lookup` function
  now fails if an input strategy is unknown\n  * Display all errors when testing file
  sources in optional tests (not just the first one).\n  * Fix haddock rendering\n
  \ * Re-organize haskell modules to strengthen dependency paths\n\n -- Simon Marechal
  <simon.marechal@edf.fr>  Tue, 06 Feb 2018 17:54:51 +0100\n\nlanguage-puppet (1.3.13)
  xenial; urgency=medium\n\n  * Support for a \"rebasefile\" option to make file()
  calls with absolute files relative to another directory.\n  * Fix an infinite loop
  with fqdn_rand\n  * Recognize v5 hiera configuration format\n  * Added debian stuff\n
  \ * Support for the hiera module layer\n  * Support new lookup puppet function\n\n
  -- Simon Marechal <simon.marechal@edf.fr>  Wed, 13 Dec 2017 14:56:33 +0100\n\nlanguage-puppet
  (1.3.12.1) xenial; urgency=medium\n\n  * Support for Glob >= 0.9, even for the test
  suite :)\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon, 09 Oct 2017 15:00:00
  +0100\n\nlanguage-puppet (1.3.12) xenial; urgency=medium\n\n  * Support for Glob
  >= 0.9\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon, 09 Oct 2017 15:00:00 +0100\n\nlanguage-puppet
  (1.3.11) xenial; urgency=medium\n\n  * Added yera command\n  * Minor fixes to the
  validate_integer function, and to the mount resource\n  * Support for the \"lookup\"
  command in hiera files\n  * Fix Glob compilation problem\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Sat, 07 Oct 2017 15:00:00 +0100\n\nlanguage-puppet (1.3.10) xenial; urgency=medium\n\n
  \ * Add `sort` stdlib function\n  * Remove `SafeProcess` module (fix `ghc-8.2` compilation)\n
  \ * Remove `ghc-7.x` support\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon,
  28 Aug 2017 15:00:00 +0100\n\nlanguage-puppet (1.3.9) xenial; urgency=medium\n\n
  \ * Moved to megaparsec 6\n\n -- Simon Marechal <bartavelle@gmail.com>  Sun, 30
  Jul 2017 15:00:00 +0100\n\nlanguage-puppet (1.3.8.1) xenial; urgency=medium\n\n
  \ * Fix haddocks error (#208)\n\n -- Simon Marechal <bartavelle@gmail.com>  Fri,
  21 Jul 2017 15:00:00 +0100\n\nlanguage-puppet (1.3.8) xenial; urgency=medium\n\n
  \ * Add support for calling Functions in Strings (#199)\n  * Add $facts hash for
  Puppet 4 (#198)\n  * Initial support for datatype syntax (#206)\n\n -- Simon Marechal
  <bartavelle@gmail.com>  Thu, 20 Jul 2017 15:00:00 +0100\n\nlanguage-puppet (1.3.7)
  xenial; urgency=medium\n\n  * Add puppet `sprintf` function\n  * Fix scientific2text
  (#196)\n\n -- Simon Marechal <bartavelle@gmail.com>  Tue, 14 Mar 2017 15:00:00 +0100\n\nlanguage-puppet
  (1.3.6) xenial; urgency=medium\n\n  * The `defined` function can now test variables\n
  \ * Fixed the `delete_at` function, added new tests, TBC\n  * Fixed the `ensure_resource`
  function, so that its second argument can take an array.\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Mon, 27 Feb 2017 15:00:00 +0100\n\nlanguage-puppet (1.3.5.1) xenial; urgency=medium\n\n
  \ * Version bumps for megaparsec & servant\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Thu, 02 Feb 2017 15:00:00 +0100\n\nlanguage-puppet (1.3.5) xenial; urgency=medium\n\n
  \ * Ignored packages are not parsed anymore\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Tue, 31 Jan 2017 15:00:00 +0100\n\nlanguage-puppet (1.3.4.1) xenial; urgency=medium\n\n
  \ * Version bump for the directory dependency\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Thu, 12 Jan 2017 15:00:00 +0100\n\nlanguage-puppet (1.3.4) xenial; urgency=medium\n\n
  \ * Adds implicit dependencies for some types where users and groups are defined\n\n
  -- Simon Marechal <bartavelle@gmail.com>  Wed, 14 Dec 2016 15:00:00 +0100\n\nlanguage-puppet
  (1.3.3) xenial; urgency=medium\n\n  * Rename some pdbquery subcommands\n  * Output
  pdbquery in `json` instead of `yaml`\n  * Fix `pdbquery resources NODENAME`\n  *
  Add `pdbquery fact NODENAME`\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon,
  05 Dec 2016 15:00:00 +0100\n\nlanguage-puppet (1.3.2.1) xenial; urgency=medium\n\n
  \ * Support for megaparsec 5.1\n\n -- Simon Marechal <bartavelle@gmail.com>  Tue,
  04 Oct 2016 15:00:00 +0100\n\nlanguage-puppet (1.3.2) xenial; urgency=medium\n\n
  \ * Add stdlib `validate_integer`\n  * Support for servant 0.9\n\n -- Simon Marechal
  <bartavelle@gmail.com>  Wed, 21 Sep 2016 15:00:00 +0100\n\nlanguage-puppet (1.3.1)
  xenial; urgency=medium\n\n  * Add `--version` to puppetresources and pdbquery\n
  \ * Version bump for some dependencies\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Wed, 31 Aug 2016 15:00:00 +0100\n\nlanguage-puppet (1.3) xenial; urgency=medium\n\n
  \ * External Lua plugins are not a thing anymore\n  * `validate_numeric` function\n
  \ * Preliminary implementation of variable captures in regexp matches\n  * Ready
  for GHC 8 and corresponding stackage nightly\n  * Fixed a deadlock when template
  code called the `template` or `inline_template` functions. It just stops now :(\n
  \ * `assert_private` function\n  * `join_keys_to_values` function\n  * Several resource
  collector misbehaviour\n  * Case expressions can now have multiple matchers of any
  kind as the same selector\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon, 11
  Jul 2016 15:00:00 +0100\n\nlanguage-puppet (1.1.5) xenial; urgency=medium\n\n  *
  Added the `pick_default` function\n  * `merge` now works with an arbitrary number
  of hashes\n  * Added the `hash` function\n  * puppet native type `file` resource
  accept selinux parameters\n  * Added the `shellquote` function\n  * `create_resources`
  can now create virtual and exported resources\n  * puppet native type `file` fix
  for parameters `sourceselect` and `recurselimit`\n  * Hiera array merge now only
  keeps unique values\n  * `merge` now properly priorizes the lastest arguments\n\n
  -- Simon Marechal <bartavelle@gmail.com>  Tue, 02 Feb 2016 15:00:00 +0100\n\nlanguage-puppet
  (1.1.4.1) xenial; urgency=medium\n\n  * Support for the new puppet `contain` function\n
  \ * Fix parser for search expression (see #132)\n  * Fix logger set up (see #136)\n
  \ * Fix some regsubst (see #119)\n  * Fix the `template` and `inline_template` functions
  (see #142)\n  * Support lookups for expressions used in selector (TODO: arbitrary
  expression)\n  * Fix a ruby 1.8 syntax error\n  * Fix a case where resource overrides
  were not applied to the correct resource\n  * Fix a bug where a class value would
  be incorrectly inferred as having a default value whereas it doesn't\n  * Replace
  `parsec` `megaparsec` (see #138)\n  * All resource names are normalized. The leading
  `::` is ignored (see #140)\n  * Add CI using travis\n  * Drop support for ghc <
  7.10 explicitly\n\n -- Simon Marechal <bartavelle@gmail.com>  Sun, 15 Nov 2015 15:00:00
  +0100\n\nlanguage-puppet (1.1.4) xenial; urgency=medium\n\n  * The `regsubst` function
  now works with arrays.\n  * The `file` variable is resolved in templates.\n  * Support
  for `function_x` calls in templates.\n  * Expressions such as (-1) are now supported.\n
  \ * Selectors recognize the undef token now.\n  * Fixed a bug with parsing lines
  starting with `::`.\n  * Sanitize resource names in some missing instances to fix
  bugs\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon, 07 Sep 2015 15:00:00 +0100\n\nlanguage-puppet
  (1.1.3) xenial; urgency=medium\n\n  * Support for the `$settings` variables.\n  *
  Support for the `to_yaml` function in templates.\n  * Settings can now be altered
  in the default YAML file.\n  * Defaults and overriden facts are now controlled in
  the YAML file too.\n\n -- Simon Marechal <bartavelle@gmail.com>  Sun, 31 May 2015
  15:00:00 +0100\n\nlanguage-puppet (1.1.1.2) xenial; urgency=medium\n\n\n -- Simon
  Marechal <bartavelle@gmail.com>  Tue, 28 Apr 2015 15:00:00 +0100\n\nlanguage-puppet
  (1.1.1) xenial; urgency=medium\n\n  * Add 'notify' native type\n  * Ability to provide
  defaults via a yaml file for some options\n  * Added the 'ensure_packages' and 'ensure_resources'
  functions\n  * Enable 'package' native type (issue #102)\n  * Builds against GHC
  7.10\n  * Even in Permissive mode, don't resolve unknown variable (see #103)\n  *
  Add priority to the logger permissive output (see #106)\n  * New hruby version\n
  \ * Rename option `--ignoremodules` into `--ignoredmodules`\n  * Hiera config interpolation
  logs decrease from NOTICE to INFO\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon,
  20 Apr 2015 15:00:00 +0100\n\nlanguage-puppet (1.1.0) xenial; urgency=medium\n\n
  \ * New `dumpinfos` debug function.\n  * The interpreter can now run in a strict
  or permissive mode.\n  * The new `-a` option accepts a comma separated list of nodes
  for gathering stats.\n  * The new `--noextratests` option disable optional tests
  from `Puppet.OptionalTests`.\n  * Implementation of `member()` from stdlib (see
  issue #100 for details)\n  * Exported/virtual custom types are not expanded. This
  is a huge bug.\n  * Class/define parameters that are explicitely set as undefined
  are now overriden by\n  * Empty resource groups are now rejected.\n  * An existing
  resource can now be realized.\n  * Hiera config interpolation logs decrease from
  WARN to NOTICE\n  * Remove option `--nousergrouptest`\n  * Ease the use of the puppetresources
  command options. See the README file for changes.\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Wed, 11 Mar 2015 15:00:00 +0100\n\nlanguage-puppet (1.0.1) xenial; urgency=medium\n\n
  \ * Support for the `join` function.\n  * Support for filtering json puppetresources
  output (fix issue #64)\n  * Support for `cmpversion` in the templates.\n  * The
  various chaining modes have been implemented.\n  * Support for the `is_bool` function
  (Pierre Radermecker)\n  * Support for `concat` and `concat::fragment` (Pierre Radermecker)\n
  \ * Fix array value extrapolation in string (issue #35)\n  * ${var} without quotes
  will now be rejected by the parser (issue #78)\n  * `README` moved to asciidoc (Pierre
  Radermecker)\n\n -- Simon Marechal <bartavelle@gmail.com>  Thu, 13 Nov 2014 15:00:00
  +0100\n\nlanguage-puppet (1.0.0) xenial; urgency=medium\n\n  * Support for Debian
  distribution detection in facter.\n  * Support for the \"~>\" operator.\n  * Support
  for mixed-case resource references.\n  * Added the `grep` function.\n  * Better
  support for --ignoremodules.\n  * Fixed parsing of standalone `$` characters in
  strings.\n\n -- Simon Marechal <bartavelle@gmail.com>  Sun, 31 Aug 2014 15:00:00
  +0100\n\nlanguage-puppet (0.14.0) xenial; urgency=medium\n\n  * Overhauled the dependency
  check system\n  * Added an option to skip the user and group checks\n  * Added an
  option to ignore some modules\n  * Added `vagrant`, `nagios`, `www-data`, `postgres`
  and `nginx` to the list of known users.\n  * Fixed how resource relationships were
  resolved with notify and before.\n  * Fixed a problem where inheritance whould be
  used with `::` prefix.\n  * The `defined` function now works with classes.\n  *
  All numbers are now strings in templates.\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Thu, 12 Jun 2014 15:00:00 +0100\n\nlanguage-puppet (0.13.0) xenial; urgency=medium\n\n
  \ * Hacky support for `scope.get_hash`.\n  * New stuff from the new parser (adding
  hashes, arrays, etc.).\n  * Wrote a pure evaluation function, for unit tests and
  prisms.\n  * `Num` and `Fractional` instances for `Expression`.\n  * Numbers are
  now internally stored as numbers, just like the new parser does.\n  * Add support
  for \"structured facts\".\n  * New stdlib functions: `is_hash`, `has_key`, `size`,
  `values`.\n  * Puppetresources does not fail tests for file sources starting with
  `file://`.\n  * Escaped characters were not properly handled in the parser.\n  *
  Properly catch division by 0 (!!!!).\n  * Got rid of the orphan instances ... code
  is now a lot uglier.\n  * Fixed settings of \"title\" and \"name\" in classes. The
  original puppet version\n  * Fixed associativity priority between `=~` and `and`.\n\n
  -- Simon Marechal <bartavelle@gmail.com>  Wed, 21 May 2014 15:00:00 +0100\n\nlanguage-puppet
  (0.12.3) xenial; urgency=medium\n\n  * puppetresources now tests that groups and
  users are defined before being used\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Thu, 13 Mar 2014 15:00:00 +0100\n\nlanguage-puppet (0.12.2) xenial; urgency=medium\n\n
  \ * Facts are now dumped in `TestDB` format by `pdbquery`.\n  * The `puppetresources`
  command now has switch controlling the PuppetDB commit and \"catalog update\".\n\n
  -- Simon Marechal <bartavelle@gmail.com>  Tue, 18 Feb 2014 15:00:00 +0100\n\nlanguage-puppet
  (0.12.1) xenial; urgency=medium\n\n  * *Dead code* finder in puppetresources.\n
  \ * CPU related facts.\n  * `puppetresources` now exits with the proper error code.\n
  \ * `puppetresources` can now display some statistics about compilation times.\n
  \ * Bumped the version of the http-conduit dependency.\n  * Fixed dependencies so
  that builds with GHC 7.8-rc1 work.\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Mon, 10 Feb 2014 15:00:00 +0100\n\nlanguage-puppet (0.12.0) xenial; urgency=medium\n\n
  \ * Builds against GHC 7.8-rc1.\n\n -- Simon Marechal <bartavelle@gmail.com>  Fri,
  07 Feb 2014 15:00:00 +0100\n\nlanguage-puppet (0.11.1) xenial; urgency=medium\n\n
  \ * Fixed build issues with strict-base-types version.\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Fri, 31 Jan 2014 15:00:00 +0100\n\nlanguage-puppet (0.11.0) xenial; urgency=medium\n\n
  \ * Removal of the dedicated parsing threads.\n  * Better default RTS options (for
  now, just the default allocation size)\n  * Upgraded dependencies : aeson 0.7, attoparsec
  0.11, lens 4, parsers\n\n -- Simon Marechal <bartavelle@gmail.com>  Thu, 30 Jan
  2014 15:00:00 +0100\n\nlanguage-puppet (0.10.6) xenial; urgency=medium\n\n  * New
  all nodes testing for puppetresources.\n  * Added some uname related facts.\n  *
  Added some lenses and prisms.\n  * Parsing function calls without parens at the
  expression level is not\n  * Allow parsing of boolean facts from YAML files.\n  *
  Allow resource references with array variables.\n  * Fix spurious multiple includes
  error.\n  * Fixed the implementation of some puppet functions.\n\n -- Simon Marechal
  <bartavelle@gmail.com>  Sat, 25 Jan 2014 15:00:00 +0100\n\nlanguage-puppet (0.10.5)
  xenial; urgency=medium\n\n  * Lambda blocks can now end with a bare function call\n
  \ * Fix version bounds with hslua and luautils\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Mon, 06 Jan 2014 15:00:00 +0100\n\nlanguage-puppet (0.10.4) xenial; urgency=medium\n\n
  \ * Moved to the latest hruby version.\n  * Updated the text bound\n\n -- Simon
  Marechal <bartavelle@gmail.com>  Wed, 18 Dec 2013 15:00:00 +0100\n\nlanguage-puppet
  (0.10.3) xenial; urgency=medium\n\n  * The scope tracking system has been improved.
  It is now possible to know\n  * is_virtual fact\n  * new stdlib functions: flatten,
  str2bool, validate_absolute_path\n  * Hiera support\n  * JSON output that is compatible
  with \"puppet apply\"\n  * New addfacts command for the pdbquery utility\n  * Support
  for the classes variable in templates\n  * Support for @instance variables in inline_template\n
  \ * Support for scope['key'] syntax in templates\n  * Support for facts overriding
  with puppetresources\n  * Deserialization problems with puppetDBs\n  * Fixed several
  bugs with imported resources\n  * Bug with relationships overrides that got stored
  as parameters\n  * Importing several exported resources from the same class now
  works\n  * Templates with an invalid encoding could crash the process\n  * Yaml
  parse errors of the puppetdb file now throw errors\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Tue, 03 Dec 2013 15:00:00 +0100\n\nlanguage-puppet (0.10.2) xenial; urgency=medium\n\n
  \ * PVP support\n  * Support for properly setting instance variables before computing\n\n
  -- Simon Marechal <bartavelle@gmail.com>  Sun, 27 Oct 2013 15:00:00 +0100\n\nlanguage-puppet
  (0.10.1) xenial; urgency=medium\n\n  * The TestDB file was never created.\n\n --
  Simon Marechal <bartavelle@gmail.com>  Sun, 27 Oct 2013 15:00:00 +0100\n\nlanguage-puppet
  (0.10.0) xenial; urgency=medium\n\n  * Map/each/filter functions with lambdas (not
  really tested)\n  * Rewrite of the PuppetDB API\n  * The whole scope stack is kept
  with each Resource, for easier debugging\n  * Inclusion of three PuppetDB backends
  : dummy (no effect), TestDB (stored\n  * This is a hack : variables declared in
  a parent (inheritance) can now be\n\n -- Simon Marechal <bartavelle@gmail.com>  Sun,
  27 Oct 2013 15:00:00 +0100\n\nlanguage-puppet (0.9.0) xenial; urgency=medium\n\n
  \ * See http://lpuppet.banquise.net/blog/2013/08/15/version-0-dot-9-0-is-out-for-testing/\n\n
  -- Simon Marechal <bartavelle@gmail.com>  Thu, 15 Aug 2013 15:00:00 +0100\n\nlanguage-puppet
  (0.4.2) xenial; urgency=medium\n\n  * Functions 'values' and 'keys' from stdlib
  are now implemented.\n  * hruby integration\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Sat, 01 Jun 2013 15:00:00 +0100\n\nlanguage-puppet (0.4.0) xenial; urgency=medium\n\n
  \ * Big refactor of the PuppetDB API.\n  * New \"fake\" PuppetDB used for testing\n
  \ * Support of the caller_module_name variable.\n  * Support for a dumpvariable()
  function.\n  * More details stored in the resource types, and in error messages.\n
  \ * User native type\n  * Removal of the MissingH, filepath, monad-loop and directory
  dependency\n  * Puppet booleans are now handled at parse stage\n  * inline_template
  function\n  * fqdn_rand now puppet perfect (at least for 32 bit max values)\n  *
  Now depends on the built-in bytestring library that comes with\n  * Aliases should
  now work as expected ... I wish!\n  * regexp_subs now works in a PCRE manner\n  *
  Destination dependency can now be a variable resolving in an array.\n\n -- Simon
  Marechal <bartavelle@gmail.com>  Thu, 16 May 2013 15:00:00 +0100\n\nlanguage-puppet
  (0.3.3) xenial; urgency=medium\n\n  * Tries to find calcerb.rb next to the executable.\n
  \ * Started cleaning imports ...\n  * It is now possible to write \"top level\"
  functions in lua.\n  * Function getvar (stdlib)\n  * TENTATIVE support for aliases.\n
  \ * Checks that file names don't have trailing slashes.\n  * Checks that exec commands
  are fully qualified if path is not defined.\n  * New native type : package.\n  *
  Fixed a ton of problems related to exported resources and relations.\n  * Minor
  fix about zonerecord.\n  * Resolving variable names starting with :: in templates\n
  \ * Fixed the file function.\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon,
  21 Jan 2013 15:00:00 +0100\n\nlanguage-puppet (0.3.2) xenial; urgency=medium\n\n
  \ * It is now possible to use expressions in include blocks. This is\n\n -- Simon
  Marechal <bartavelle@gmail.com>  Thu, 13 Dec 2012 15:00:00 +0100\n\nlanguage-puppet
  (0.3.1) xenial; urgency=medium\n\n  * Yes, we can generate JSon catalogs now.\n
  \ * Several bugs about resource relationships.\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Fri, 23 Nov 2012 15:00:00 +0100\n\nlanguage-puppet (0.3.0) xenial; urgency=medium\n\n
  \ * Resource relationships are somehow supported. The API is broken as a\n  * Exported
  resources are now returned.\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon, 19
  Nov 2012 15:00:00 +0100\n\nlanguage-puppet (0.2.2) xenial; urgency=medium\n\n  *
  A few statistics are exported.\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon,
  12 Nov 2012 15:00:00 +0100\n\nlanguage-puppet (0.2.1) xenial; urgency=medium\n\n
  \ * The defaults system was pretty much broken, it should be better now.\n  * Basic
  testing framework started.\n  * create_resources now supports the defaults system.\n
  \ * defined() function works for resource references.\n  * in operator implemented
  for hashes.\n  * Multithreading works.\n  * The ruby <> daemon communication is
  now over ByteStrings.\n  * The toRuby function has been optimized, doubling the
  overall speed for\n  * Various internal changes.\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Mon, 12 Nov 2012 15:00:00 +0100\n\nlanguage-puppet (0.2.0) xenial; urgency=medium\n\n
  \ * Lua integration for custom functions.\n  * Automatically creates magic types
  based on the content of the modules.\n  * Defaults parameters can now end with a
  comma.\n\n -- Simon Marechal <bartavelle@gmail.com>  Mon, 08 Oct 2012 15:00:00 +0100\n\nlanguage-puppet
  (0.1.8.0) xenial; urgency=medium\n\n  * Refactoring of the PuppetDB API for interfacing
  with the facter library.\n  * Support of exported resource resolution through PuppetDB
  ! This results\n  * Make binary distribution possible (ruby helper path).\n  * Defines
  with spurious parameters, or unset mandatory parameters, should\n  * Exception handling
  for the HTTP failures.\n  * Handles undefined variables in Ruby templates.\n  *
  Undefined variables in Erbs now always throw exceptions. This is\n\n -- Simon Marechal
  <bartavelle@gmail.com>  Thu, 20 Sep 2012 15:00:00 +0100\n\nlanguage-puppet (0.1.7.2)
  xenial; urgency=medium\n\n  * Preliminary support for PuppetDB\n\n -- Simon Marechal
  <bartavelle@gmail.com>  Mon, 17 Sep 2012 15:00:00 +0100\n\nlanguage-puppet (0.1.7.1)
  xenial; urgency=medium\n\n  * Various details have been modified since the official
  language\n  * Better handling of collector conditions.\n  * Solves bug with interpolable
  strings that are not resolved when first\n  * Amending attributes with a collector.\n
  \ * Stdlib functions : chomp\n  * Resource pretty printer now aligns =>.\n  * Case
  statements with regexps.\n\n -- Simon Marechal <bartavelle@gmail.com>  Fri, 14 Sep
  2012 15:00:00 +0100\n\nlanguage-puppet (0.1.7) xenial; urgency=medium\n\n  * Fix
  bug with '<' in the Erb parser !\n  * Assignments can now be any valid Puppet expression.\n
  \ * Proper list of metaparameters.\n  * Quick resolution of boolean conditions.\n
  \ * Start of the move to a real PCRE library.\n  * Function is_domain_name.\n  *
  New native types : zone_record, cron, exec, group, host, mount, file.\n\n -- Simon
  Marechal <bartavelle@gmail.com>  Fri, 24 Aug 2012 15:00:00 +0100\n\nlanguage-puppet
  (0.1.6) xenial; urgency=medium\n\n  * Errors now print a stack trace (only works
  with profiling builds).\n  * Nested classes.\n  * generate() function.\n  * defines
  with spurious top level statements now should work.\n  * validate_* functions from
  puppetlabs/stdlib.\n  * Metaparameters now include stages (not handled).\n  * Resolving
  non empty arrays as boolean returns true.\n  * Duplicate parameters are now detected.\n\n
  -- Simon Marechal <bartavelle@gmail.com>  Wed, 01 Aug 2012 15:00:00 +0100\n\nlanguage-puppet
  (0.1.5) xenial; urgency=medium\n\n  * Detection of spurious parameters when declaring
  parametrized classes now\n  * Resource overrides with non trivial names should now
  work.\n  * Require statements in required files would not be loaded.\n\n -- Simon
  Marechal <bartavelle@gmail.com>  Fri, 06 Jul 2012 15:00:00 +0100\n\nlanguage-puppet
  (0.1.4) xenial; urgency=medium\n\n  * Basic native template function.\n  * Added
  anchor as a native type for now. A better fix will be to just parse\n  * Tentative
  defined() implementation. Will not work for resource references.\n  * Functions
  md5, sha1, lowcase, upcase, split.\n  * String comparison is not case insensitive.\n
  \ * Variable scope for inherited classes should now work.\n  * Support for the $module_name
  variable (probably a bit buggy).\n  * Proper location of a \"define not found\"
  error.\n  * Parsing bug for single quoted strings and slashes.\n  * Bug where a
  resource name is a variable that is actually an array.\n  * Array indexing.\n  *
  Top level variables are now supported in Erb.\n  * Removed the title parameter from
  the catalog printing functions.\n  * Used hslint a bit.\n\n -- Simon Marechal <bartavelle@gmail.com>
  \ Mon, 02 Jul 2012 15:00:00 +0100\n"
basic-deps:
  http-client: ! '>=0.4.30 && <0.6'
  exceptions: ! '>=0.8 && <0.11'
  bytestring: -any
  lens-aeson: ! '>=1.0'
  ansi-wl-pprint: ! '>=0.6.8'
  case-insensitive: ==1.2.*
  unix: ! '>=2.7 && <2.8'
  split: ==0.2.*
  stm: ==2.4.*
  base: ! '>=4.9 && <5'
  time: ! '>=1.5 && <2'
  strict-base-types: ! '>=0.3'
  servant-client: ! '>=0.9 && <0.15'
  unordered-containers: ==0.2.*
  hspec: -any
  text: ! '>=0.11'
  http-api-data: ! '>=0.2 && <0.4'
  megaparsec: ==6.*
  filepath: ! '>=1.4'
  process: ! '>=1.2'
  parsec: ==3.1.*
  protolude: ! '>=0.2'
  servant: ! '>=0.9 && <0.15'
  memory: ! '>=0.7'
  containers: ==0.5.*
  lens: ! '>=4.12 && <5'
  hruby: ! '>=0.3.2 && <0.4'
  formatting: -any
  hslogger: ==1.2.*
  filecache: ! '>=0.2.9 && <0.5'
  cryptonite: ! '>=0.6'
  mtl: ! '>=2.2.1 && <2.3'
  hashable: ==1.2.*
  operational: ! '>=0.2.3 && <0.3'
  parallel-io: -any
  base16-bytestring: ==0.1.*
  attoparsec: ! '>=0.12'
  regex-pcre-builtin: ! '>=0.94.4'
  transformers: ! '>=0.4 && <0.6'
  language-puppet: -any
  optparse-applicative: -any
  random: -any
  scientific: ! '>=0.2 && <0.4'
  pcre-utils: ! '>=0.1.7 && <0.2'
  Glob: -any
  aeson: ! '>=0.8'
  yaml: ! '>=0.8.8 && <0.9'
  vector: ! '>=0.10'
  directory: ! '>=1.2 && <1.4'
all-versions:
- '0.1.3'
- '0.1.4'
- '0.1.5'
- '0.1.6'
- '0.1.7'
- '0.1.7.2'
- '0.1.8.0'
- '0.2.0'
- '0.2.0.1'
- '0.2.0.2'
- '0.2.2.0'
- '0.3.0.0'
- '0.3.1.0'
- '0.3.2'
- '0.4.0'
- '0.4.2'
- '0.10.0'
- '0.10.1'
- '0.10.2'
- '0.10.3'
- '0.10.4'
- '0.10.5'
- '0.10.6'
- '0.11.0'
- '0.11.1'
- '0.11.1.1'
- '0.12.0'
- '0.12.1'
- '0.12.2'
- '0.12.3'
- '0.13.0'
- '0.14.0'
- '1.0.0'
- '1.0.1'
- '1.1.0'
- '1.1.1'
- '1.1.1.1'
- '1.1.1.2'
- '1.1.3'
- '1.1.3.1'
- '1.1.4'
- '1.1.4.1'
- '1.1.5'
- '1.1.5.1'
- '1.2'
- '1.3'
- '1.3.1'
- '1.3.1.1'
- '1.3.2'
- '1.3.2.1'
- '1.3.3'
- '1.3.4'
- '1.3.4.1'
- '1.3.5'
- '1.3.5.1'
- '1.3.6'
- '1.3.7'
- '1.3.8'
- '1.3.8.1'
- '1.3.9'
- '1.3.10'
- '1.3.11'
- '1.3.12'
- '1.3.12.1'
- '1.3.13'
- '1.3.14'
- '1.3.15'
- '1.3.16'
- '1.3.17'
- '1.3.18'
- '1.3.18.1'
- '1.3.19'
author: Simon Marechal
latest: '1.3.19'
description-type: text
description: ! "= Language-puppet\n\nimage:https://img.shields.io/hackage/v/language-puppet.svg[link=\"http://hackage.haskell.org/package/language-puppet\"]\nimage:https://www.stackage.org/package/language-puppet/badge/lts[link=\"https://www.stackage.org/lts/package/language-puppet\"]\nimage:https://www.stackage.org/package/language-puppet/badge/nightly[link=\"https://www.stackage.org/nightly/package/language-puppet\"]\nimage:https://travis-ci.org/bartavelle/language-puppet.svg?branch=master[\"Build
  Status\", link=\"https://travis-ci.org/bartavelle/language-puppet\"]\n\nA library
  to work with Puppet manifests, test them and eventually replace everything ruby.\n\n.Basic
  usage:\n```\npuppetresources -p /where/your/puppet/files/are -o node.name.com\n```\n\n.Quick
  install instruction with stack\n```bash\nstack install language-puppet\n```\n\n.Build
  instructions:\n```bash\ngit clone https://github.com/bartavelle/language-puppet.git\ncd
  language-puppet\n# Using nix\ncabal2nix . > default.nix\nnix-build shell.nix\n#
  Using stack\nln -s stack-10.yaml stack.yaml\nstack build\n```\n\n== Puppetresources\n\nThe
  `puppetresources` command is a command line utility that let you interactively compute
  catalogs on your local computer.\nIt is much faster than its ruby counterpart, and
  has been designed for giving assistance to the Puppet catalog writer.\n\n\nThere
  are 4 different modes:\n\n* `--node` will display all resources on screen in a nice
  user-friendly colored fashion.\n* `--all` displays statitics and optionally shows
  dead code.\n* `--parse` only goes as far as parsing. No interpretation.\n* `--showcontent`
  to display file content.\n\nCatalog is not computed exactly the same way Puppet
  does. Some good practices are enforced. A strict and more permissive mode are provided.\n\n===
  Command line arguments\n\n`-p` or `--puppetdir`::\n\nThis argument is mandatory
  except in `parse` mode. It must point to the base of the puppet directory (the directory
  that contains the `modules` and `manifests` directories).\n\n`-o` or `--node`::\n\nEnable
  the `node mode`. This let you specify the name of the node you wish to compute the
  catalog for.\n\n`-a` or `-all`::\n\nEnable the `stats mode`. If you specify `allnodes`
  it will compute the catalogs for all nodes that are specified in `site.pp` (this
  will not work for regexp-specified or the default nodes). You can also specify a
  list of nodes separated by a comma.\n+\nCombined with `--deadcode`, it will display
  the list of puppet files that have not been used.\n+\nThis is useful as automated
  tests, to check a change didn't break something. You might want to run this option
  with `+RTS -N`.\n\n`-t` or `--type`::\n\nFilters the resources of the resulting
  catalog by type. Using PCRE regex is supported.\n\n`-n` or `--name`::\n\nFilters
  the resources of the resulting catalog by name. Using PCRE regex is supported.\n\n`-c`
  or `--showcontent`::\n\nIf `-n` is the exact name of a file type resource defined
  in the catalog, this will display the file content nicely. Useful for debugging
  templates.\n+\nExample: `puppetresources -p . -o mynodename -n '/etc/motd' --showcontent`\n\n`--loglevel`
  or `-v`::\n\nPossible values are : DEBUG, INFO, NOTICE, WARNING, ERROR\n\n`--pdburl`::\n\nExpects
  the url of a live PuppetDB.\n\n`--pdbfile`::\n\nExpects a path to a *fake* PuppetDB,
  represented as a YAML file on disk. This option is pretty slow but can be invaluable
  to test exported resources tricks.\n\n`--hiera`::\n\nExpects the path to the `hiera.yaml`
  file.\n\n`--ignoredmodules`::\n\nExpects a list of comma-separated modules. The
  interpreter will not try to parse and evaluate the defined types and classes from
  this module. This is useful for using modules that use bad\npractices forbidden
  by `puppetresources`.\n\n`--commitdb`::\n\nWhen this flag is set, exported resources,
  catalogs and facts are saved in the PuppetDB. This is useful in conjunction with
  `--pdbfile`.\n\n`--checkExported`::\n\nWhen this flag is set, exported resources
  are saved in the PuppetDB. This is useful in conjunction with `--pdbfile`.\n\n`-j`
  or `--JSON`::\n\nDisplays the catalog as a Puppet-compatible JSON file, that can
  then be used with `puppet apply`.\n\n`--strict`::\n\nEnable strict check.\nStrict
  is less permissive than vanilla Puppet.\nIt is meant to prevent some pitfalls by
  enforcing good practices.\nFor instance it refuses to\n  - silently ignore/convert
  `undef` variables\n  - lookup an hash with an unknown key and return `undef`.\n\n`--noextratests`::\n\nDisable
  the extra tests from `Puppet.OptionalTests`.\n\n`--parse`::\n\nEnable `parse mode`.
  Specify the puppet file to be parsed. Variables are not resolved. No interpretation.\n\n`--version`::\n\nOutput
  version information and exist.\n\n=== Settings defaults using a yaml file\n\nDefaults
  for some of these options can be set using a `/yourworkingdirectory/tests/defaults.yaml`
  file. For instance `OptionalTests` is checking that all users and groups are known.
  Because some of these users and groups might be defined outside puppet, a list of
  known ones is used internally. This can be overridden in that file using the key
  `knownusers` and `knowngroups`.\n\nPlease look at https://github.com/bartavelle/language-puppet/blob/master/tests/defaults.yaml[the
  template file] for a list of possible defaults.\n\n== pdbQuery\n\nThe `pdbquery`
  command will work with different implementations of PuppetDB (the official one with
  its HTTP API, the file-based backend and dummy ones). It can be used to:\n\n* export
  data from production PuppetDB to a file (in order to debug some issue with `puppetresources`).\n*
  query a Puppetdb\n\nHere is a list of command line arguments :\n\n`-l` or `--location`::\n\nThe
  URL of the PuppetDB when working with a remote PuppetDB, a file path when working
  with the file-based test implementation.\n\n`-t` or `--pdbtype`::\n\nThe type of
  PuppetDB to work with:\n\n* dummy: a dummy PuppetDB.\n* remote: a \"real\" PuppetDB,
  accessed by its HTTP API.\n* test: a file-based backend emulating a PuppetDB.\n\n.Commands\n\n`facts`::\nOutput
  facts for a specific node (json)\n\n`nodes`::\nOutput all nodes (json)\n\n`resources`::\nOutput
  all resources for a specific node (json)\n\n`dumpfacts`::\nDump all facts to `/tmp/allfacts.yaml`.\n\n`snapshot`::\nCreate
  a test DB from the current DB\n\n`addfacts`::\nAdds facts to the test DB for the
  given node name, if they are not already defined.\n\n`--version`::\nOutput version
  information and exit.\n\n== Unsupported Puppet idioms or features\n\nOS::\n  * `OS
  X` is supported when using the latest `filecache-0.3`.\n\npuppet functions::\n  *
  the `require` function is not supported (see https://github.com/bartavelle/language-puppet/issues/17[issue
  #17])\n  * the deprecated `import` function is not supported\n  * the deprecated
  node inheritance feature is not supported\n\ncustom ruby functions::\n"
license-name: BSD3
