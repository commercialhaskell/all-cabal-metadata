homepage: https://github.com/leptonyu/salak#readme
changelog-type: ''
hash: 435a84ff575f5aa35b479101633401efdabd92bddb5f6a63b0ac33fa3220bbc4
test-bench-deps:
  exceptions: ! '>=0.10.2 && <0.11'
  heaps: ! '>=0.3.6.1 && <0.4'
  bytestring: ! '>=0.10.8.2 && <0.11'
  base: ! '>=4.10 && <5'
  time: ! '>=1.8.0.2 && <1.9'
  unordered-containers: ! '>=0.2.10.0 && <0.3'
  hspec: ==2.*
  text: ! '>=1.2.3.1 && <1.3'
  filepath: ! '>=1.4.2.1 && <1.5'
  menshen: ! '>=0.0.3 && <0.1'
  data-default: ! '>=0.7.1.1 && <0.8'
  unliftio-core: ! '>=0.1.2.0 && <0.2'
  mtl: ! '>=2.2.2 && <2.3'
  hashable: ! '>=1.2.7.0 && <1.3'
  attoparsec: ! '>=0.13.2.2 && <0.14'
  random: ==1.1.*
  scientific: ! '>=0.3.6.2 && <0.4'
  QuickCheck: ! '>=2.13.2 && <2.14'
  directory: ! '>=1.3.3.0 && <1.4'
maintainer: Daniel YU <leptonyu@gmail.com>
synopsis: Configuration Loader
changelog: ''
basic-deps:
  exceptions: ! '>=0.10.2 && <0.11'
  heaps: ! '>=0.3.6.1 && <0.4'
  bytestring: ! '>=0.10.8.2 && <0.11'
  base: ! '>=4.10 && <5'
  time: ! '>=1.8.0.2 && <1.9'
  unordered-containers: ! '>=0.2.10.0 && <0.3'
  text: ! '>=1.2.3.1 && <1.3'
  filepath: ! '>=1.4.2.1 && <1.5'
  menshen: ! '>=0.0.3 && <0.1'
  data-default: ! '>=0.7.1.1 && <0.8'
  unliftio-core: ! '>=0.1.2.0 && <0.2'
  mtl: ! '>=2.2.2 && <2.3'
  hashable: ! '>=1.2.7.0 && <1.3'
  attoparsec: ! '>=0.13.2.2 && <0.14'
  scientific: ! '>=0.3.6.2 && <0.4'
  directory: ! '>=1.3.3.0 && <1.4'
all-versions:
- 0.1.0
- 0.1.4
- 0.1.6
- 0.1.7
- 0.1.8
- 0.1.11
- 0.2.0
- 0.2.1
- 0.2.2
- 0.2.3
- 0.2.5
- 0.2.6
- 0.2.8
- 0.2.9
- 0.2.9.1
- 0.2.9.2
- 0.2.9.3
- 0.2.10
- '0.3'
author: Daniel YU
latest: '0.3'
description-type: markdown
description: "# salak\n\n[![Hackage](https://img.shields.io/hackage/v/salak.svg)](https://hackage.haskell.org/package/salak)\n[![stackage
  LTS package](http://stackage.org/package/salak/badge/lts)](http://stackage.org/lts/package/salak)\n[![stackage
  Nightly package](http://stackage.org/package/salak/badge/nightly)](http://stackage.org/nightly/package/salak)\n[![Build
  Status](https://travis-ci.org/leptonyu/salak.svg?branch=master)](https://travis-ci.org/leptonyu/salak)\n\nConfiguration
  (re)loader in Haskell.\n\n## salak-yaml\n[![salak-yaml](https://img.shields.io/hackage/v/salak-yaml.svg)](https://hackage.haskell.org/package/salak-yaml)\n##
  salak-toml\n[![salak-toml](https://img.shields.io/hackage/v/salak-toml.svg)](https://hackage.haskell.org/package/salak-toml)\n\nThis
  library define a universal procedure to load configurations and parse properties,
  also supports reload configuration files.\n\nWe can load configurations from command
  line, environment, configuration files such as yaml or toml etc, and we may want
  to have our own strategies to load configurations from multi sources and overwrite
  properties by orders of these sources.\n\n`PropConfig` defines a common loading
  strategy:\n> 1. loadCommandLine\n> 2. loadEnvironment\n> 3. loadConfFiles\n> 4.
  load file from folder `salak.conf.dir` if defined\n> 5. load file from current folder
  if enabled\n> 6. load file from home folder if enabled\n> 7. file extension matching,
  support yaml or toml or any other loader.\n\nLoad earlier has higher orders, orders
  cannot be changed.\n\n`ReaderT SourcePack m` defines how to read properties:\n```Haskell\nrequire
  \"abc.prop\"\n```\n\n`ReloadableSourcePackT m` defines how to read reloadable properties:\n```Haskell\nrequireD
  \"abc.dynamic.prop\"\n```\n\nFor commandline and environment, \n```\nCommandLine:
  \ --package.a.enabled=true\nEnvironment: PACKAGE_A_ENABLED: false\n```\n\nUsage:\n\n\nEnvironment:\n```\nexport
  TEST_CONFIG_NAME=daniel\n```\nCurrent Directory:  salak.yaml\n```YAML\ntest.config:\n
  \ name: noop\n  dir: ls\n```\nCurrent Directory:  salak.toml\n```TOML\n[test.config]\next=2\n```\n\n```Haskell\ndata
  Config = Config\n  { name :: Text\n  , dir  :: Maybe Text\n  , ext  :: Int\n  }
  deriving (Eq, Show)\n\ninstance MonadCatch m => FromProp m Config where\n  fromProp
  = Config\n    <$> \"user\" ? pattern \"[a-z]{5,16}\"\n    <*> \"pwd\"\n    <*> \"ext\"
  .?= 1\n\nmain = runSalakWith \"salak\" (YAML :|: TOML) $ do\n  c :: Config <- require
  \"test.config\"\n  lift $ print c=\n```\n\nGHCi play\n```Haskell\nλ> :set -XFlexibleInstances
  -XMultiParamTypeClasses \nλ> import Salak\nλ> import Data.Default\nλ> import Data.Text(Text)\nλ>
  data Config = Config { name :: Text, dir  :: Maybe Text, ext  :: Int} deriving (Eq,
  Show)\nλ> instance MonadCatch m => FromProp m Config where fromProp = Config <$>
  \"user\" <*> \"dir\" <*> \"ext\" .?= 1\nλ> runSalak def (require \"\") :: IO Config\nConfig
  {name = \"daniel\", dir = Nothing, ext = 1}\n```\n\nTODO:\n- Recover placeholder\n-
  Add git pull support.\n- Add automatic reloading.\n"
license-name: BSD-3-Clause
