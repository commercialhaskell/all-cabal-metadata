all-versions:
- 0.1.0.0
author: Michael B. Gale
basic-deps:
  aeson: '>=2.2.3 && <2.3'
  base: '>=4.7 && <5'
  bytestring: '>=0.12.1 && <0.13'
  containers: '>=0.6.8 && <0.8'
  deriving-aeson: '>=0.2.10 && <0.3'
  exceptions: '>=0.10.9 && <0.11'
  home-assistant-client: '>=0'
  http-client: '>=0.7.19 && <0.8'
  http-client-tls: '>=0.3.6 && <0.4'
  http-types: '>=0.12.4 && <0.13'
  optparse-applicative: '>=0.18.0 && <0.20'
  servant: '>=0.20.3 && <0.21'
  servant-client: '>=0.20.3 && <0.21'
  text: '>=2.1.1 && <2.2'
changelog: |
  # Changelog for `home-assistant-client`

  All notable changes to this project will be documented in this file.

  The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
  and this project adheres to the
  [Haskell Package Versioning Policy](https://pvp.haskell.org/).

  ## 0.1.0.0 - 2025-08-10

  - Initial version with partial support for the Home Assistant REST API
changelog-type: markdown
description: |
  # home-assistant-client: Haskell client for the Home Assistant API

  ![GitHub](https://img.shields.io/github/license/mbg/home-assistant-client)
  [![Haskell](https://github.com/mbg/home-assistant-client/actions/workflows/haskell.yml/badge.svg)](https://github.com/mbg/home-assistant-client/actions/workflows/haskell.yml)
  [![Stackage Nightly](https://github.com/mbg/home-assistant-client/actions/workflows/nightly.yml/badge.svg)](https://github.com/mbg/home-assistant-client/actions/workflows/nightly.yml)

  A Haskell library for the [Home Assistant API](https://developers.home-assistant.io/docs/api/rest/), allowing you to write Haskell applications which interact with [Home Assistant](https://www.home-assistant.io).

  A `ha-client` program that exposes the library functions as CLI commands is also provided.

  ## Library usage

  The Home Assistant API offers fairly general endpoints, for which the `HomeAssistant.Client` module provides client computations. All API endpoints require authorisation with a [long-lived token](https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token). For example, to retrieve a list available services from Home Assistant:

  ```haskell
  import Network.HTTP.Client

  defaultAddress :: String
  defaultAddress = "http://homeassistant.local:8123/"

  main :: IO ()
  main = do
      -- `token` should be the long-lived token
      httpManager <- defaultManagerSettings
      address <- parseBaseUrl defaultAddress

      let env = mkHomeAssistantEnv token httpManager address
      result <- runClientM services env
      print result
  ```

  ## CLI usage

  You must set an environment variable named `HA_TOKEN` to your [long-lived token](https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token). The CLI also inspects the `HA_ADDRESS` environment variable to determine the address of the Home Assistant server. This is optional and will default to `http://homeassistant.local:8123/` if no value is set.

  The `ha-client` CLI can be invoked with `--help` to retrieve usage information. All sub-commands also support the `--help` flag to retrieve command-specific help.
description-type: markdown
hash: ca02d09c621dc44296f2bab5df4396b5c23bd3281b89acc0ac62820b903447dd
homepage: https://github.com/mbg/home-assistant-client#readme
latest: 0.1.0.0
license-name: BSD-3-Clause
maintainer: github@michael-gale.co.uk
synopsis: Client library for the Home Assistant API.
test-bench-deps:
  aeson: '>=2.2.3 && <2.3'
  base: '>=4.7 && <5'
  bytestring: '>=0.12.1 && <0.13'
  containers: '>=0.6.8 && <0.8'
  deriving-aeson: '>=0.2.10 && <0.3'
  exceptions: '>=0.10.9 && <0.11'
  home-assistant-client: '>=0'
  http-client: '>=0.7.19 && <0.8'
  http-client-tls: '>=0.3.6 && <0.4'
  http-types: '>=0.12.4 && <0.13'
  servant: '>=0.20.3 && <0.21'
  servant-client: '>=0.20.3 && <0.21'
  text: '>=2.1.1 && <2.2'
