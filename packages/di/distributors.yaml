all-versions:
- 0.1.0.0
- 0.1.0.1
- 0.1.0.2
- 0.1.0.3
- 0.2.0.0
- 0.2.0.1
- 0.3.0.0
author: Eitan Chatav
basic-deps:
  MemoTrie: '>=0.6 && <1'
  adjunctions: '>=4.4 && <5'
  base: '>=4.15 && <5'
  bifunctors: '>=5.5 && <6'
  bytestring: '>=0.11 && <1'
  containers: '>=0.6 && <1'
  contravariant: '>=1.5 && <2'
  distributive: '>=0.6 && <1'
  lens: '>=5.0 && <6'
  mtl: '>=2.2 && <3'
  profunctors: '>=5.6 && <6'
  tagged: '>=0.8 && <1'
  template-haskell: '>=2.17 && <3'
  text: '>=2 && <3'
  th-abstraction: '>=0.4 && <1'
  vector: '>=0.12 && <1'
  witherable: '>=0.4 && <1'
changelog: |+
  # Changelog for `distributors`

  ## 0.3.0.0 - 2026-02-05

  ### New Modules

  - `Control.Lens.Grammar` - Grammar hierarchy based on Chomsky's formal grammar classification
  - `Control.Lens.Grammar.BackusNaur` - Context-free grammar combinators (BNF)
  - `Control.Lens.Grammar.Boole` - Boolean algebra for grammars
  - `Control.Lens.Grammar.Kleene` - Regular expression combinators
  - `Control.Lens.Grammar.Symbol` - Symbol-level grammar primitives
  - `Control.Lens.Grammar.Token` - Token-level grammar primitives
  - `Data.Profunctor.Filtrator` - Filterable profunctors
  - `Data.Profunctor.Grammar` - Grammar profunctor abstraction
  - `Data.Profunctor.Monadic` - Monadic profunctor combinators with QualifiedDo support
  - `Data.Profunctor.Monoidal` - Monoidal profunctor combinators

  ### Removed Modules

  - `Text.Grammar.Distributor` - Functionality split into the new modules above

  ### Testing

  - Added `doctest` for documentation testing
  - New test examples: Arithmetic, Json, Lambda, LenVec, RegString, SemVer, SExpr

  ## 0.2.0.0 - 2025-07-08

  Added some combinators for `RegEx`es. Updated documentation.

  ## 0.1.0.0

  First version with profunctorial interpretation of invertible syntax.

changelog-type: markdown
description: |
  # Distributors
  ## Unifying Parsers, Printers & Grammars

  [![GithubWorkflowCI](https://github.com/morphismtech/distributors/actions/workflows/ci.yml/badge.svg)](https://github.com/morphismtech/distributors/actions/workflows/ci.yml)

  [Github](https://github.com/morphismtech/distributors)

  [Hackage](https://hackage.haskell.org/package/distributors)

  [YouTube](https://www.youtube.com/watch?v=tZErj7XYpVI)

  This library provides mathematically inspired abstractions for coders to write parsers that can also be inverted to printers.

  ## introduction
  The term "distributor" is a synonym for "[profunctor](https://ncatlab.org/nlab/show/profunctor)". Jean Bénabou who invented the term and originally used “profunctor,” then preferred “[distributor](http://www.entretemps.asso.fr/maths/Distributors.pdf)”, which is supposed to carry the intuition that a distributor generalizes a functor in a similar way to how a distribution generalizes a function.

  [Bénabou](http://cahierstgdc.com/wp-content/uploads/2022/07/F.-BORCEUX-LXIII-3.pdf) in his time introduced the notions of enriched categories, bicategories as well as distributors and invented the term monad. He was lost to us on 11, February 2022 and this library is dedicated to his memory.

  Since "profunctor" became the standard nomenclature, we reappropriate "distributor" to describe a profunctor on a [distributive category](https://ncatlab.org/nlab/show/distributive+category).

  This library provides a study of distributor theory and optics,
  and their application to invertible grammar theory.

  ## previous work

  The results concerning invertible parsers are a profunctorial interpretation of [Invertible Syntax Descriptions](https://www.mathematik.uni-marburg.de/~rendel/rendel10invertible.pdf) by Tillman Rendel & Klaus Ostermann.

  While `Distributor`s in the library are lax distributive endoprofunctors, a mathematical treatment of strong (i.e. with invertible structure morphisms) distributors is given by Travis Squires in [Profunctors and Distributive Categories](https://central.bac-lac.gc.ca/.item?id=MR31635).

  The idea for unifying Backus-Naur grammars with parsers comes from Joachim Breitner in a post [Showcasing Applicative](https://www.joachim-breitner.de/blog/710-Showcasing_Applicative).

  The idea for using monadic profunctors for reversible context-free grammars
  comes from Li-Yao Xia, in some posts and a paper but particularly
  this post on [Monadic profunctors for bidirectional programming](https://blog.poisson.chat/posts/2017-01-01-monadic-profunctors.html).

  The person deserving the most credit for bringing the power of optics to programming, with his [lens library](https://github.com/ekmett/lens/), is Ed Kmett, to whom I am very grateful for teaching me a lot.

  None of the ideas in this library are particularly original and a lot of related ideas have been explored, in Tom Ellis' [product-profunctors](https://github.com/tomjaguarpaw/product-profunctors) as well as Sjoerd Visscher's [one-liner](https://github.com/sjoerdvisscher/one-liner) and more. Such explorations are _not_ limited to Haskell. Brandon Williams and Stephen Celis' excellent [swift-parsing](https://github.com/pointfreeco/swift-parsing) was also influenced by invertible parser theory.

  Some optics in this library are [grates, a new kind of optic](https://r6research.livejournal.com/28050.html), discovered by Russel O'Connor and James Deikun; monocles which are studied by Alexandre Garcia de Oliveira, Mauro Jaskelioff, and Ana Cristina Vieira de Melo in [On Structuring Functional Programs with Monoidal Profunctors](https://arxiv.org/abs/2207.00852); and withers, discovered by Chris Penner in [Composable filters using Witherable optics](https://chrispenner.ca/posts/witherable-optics).

  ## contributing

  Contributors are welcome. The [Issues](https://github.com/morphismtech/distributors/issues) page is a good place to communicate.
description-type: markdown
hash: 5352a431c453f074473ffe8e2bf61effe483d17bb5534bc69715ae04cbecbdfc
homepage: https://github.com/morphismtech/distributors#readme
latest: 0.3.0.0
license-name: BSD-3-Clause
maintainer: eitan.chatav@gmail.com
synopsis: Unifying Parsers, Printers & Grammars
test-bench-deps:
  MemoTrie: '>=0.6 && <1'
  adjunctions: '>=4.4 && <5'
  base: '>=4.15 && <5'
  bifunctors: '>=5.5 && <6'
  bytestring: '>=0.11 && <1'
  containers: '>=0.6 && <1'
  contravariant: '>=1.5 && <2'
  distributive: '>=0.6 && <1'
  distributors: '>=0'
  doctest: '>=0.18 && <1'
  hspec: '>=2.7 && <3'
  lens: '>=5.0 && <6'
  mtl: '>=2.2 && <3'
  profunctors: '>=5.6 && <6'
  tagged: '>=0.8 && <1'
  template-haskell: '>=2.17 && <3'
  text: '>=2 && <3'
  th-abstraction: '>=0.4 && <1'
  vector: '>=0.12 && <1'
  witherable: '>=0.4 && <1'
