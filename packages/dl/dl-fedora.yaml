homepage: https://github.com/juhp/dl-fedora
changelog-type: markdown
hash: 7b6d1552ec59a9eaa6a8e4a4b96b2329ee849ca4f0f1cbe0bd610c351645a881
test-bench-deps:
  base: '>=4 && <5'
  simple-cmd: -any
maintainer: juhpetersen@gmail.com
synopsis: Fedora image download tool
changelog: |
  # Changelog

  ## 0.9.6 (2023-08-18)
  - --no-dl option to avoid dl.fp.o even if newer
  - support c8s and add options for centos-stream channels
  - update eln path
  - downloadFile: add showdestdir to downloading message and curl debug
  - add --debug option

  ## 0.9.5 (2023-04-13)
  - add F38 Sericea sway ostree image

  ## 0.9.4 (2023-03-23)
  - add new F38 spins: Budgie and Sway
  - change koji target to --koji mirror option
  - if mirror redirect fails then fallback to primary
  - run with qemu -cpu host option

  ## 0.9.3 (2022-06-11)
  - show timestamp of image

  ## 0.9.2 (2021-10-01)
  - fix test (beta) image selection to be the latest version

  ## 0.9.1 (2021-08-30)
  - new Kinoite edition for F35
  - initial Centos Stream "c9s" target for production boot images

  ## 0.9 (2021-04-22)
  - edition is now an argument after release, not an option
  - --local --dryrun only accesses local files now for speed
  - add '--no-http-timeout' (mostly for CI)

  ## 0.8 (2021-04-07)
  - --local option: print (or --run) current local image instead of newer download
  - improve --dryrun Downloads/ handling for testsuite in CI

  ## 0.7.7 (2021-04-06)
  - add the new F34 i3 spin
  - shorten mate_compiz to mate
  - convert tests to Haskell

  ## 0.7.6 (2021-01-21)
  - improve help text for releases related for Beta and RCs (#1)
  - if ~/Downloads/iso/ exists then download to it otherwise ~/Downloads/
  - support ELN boot.iso

  ## 0.7.5 (2020-09-13)
  - always print download url and already downloaded filename
  - --replace deletes previous symlinked image after downloading new one
  - improved checksum file handling

  ## 0.7.4 (2020-03-15)
  - add 'koji' release target: downloads latest branched compose from kojipkgs

  ## 0.7.3 (2020-02-11)
  - fix CHECKSUM512 detection (for respins)

  ## 0.7.2 (2019-10-29)
  - add stage release target (useful just prior to release)

  ## 0.7.1 (2019-09-25)
  - print datestamp beside filesize
  - show directory correctly with ~/
  - use a subdirectory for checksum files

  ## 0.7 (2019-09-12)
  - add --checksum to always do checksum when possible
  - add --run to run image in qemu-kvm if available
  - rework algorithms
    - check local filesize earlier: don't even check mirror if already downloaded
    - for partial local file output percentage already downloaded
    - otherwise show filesize
  - show dir for symlink: so one knows location
  - drop the 'devel' target (use release version number instead)
  - handle old dangling symlink too (after deleting iso)

  ## 0.6 (2019-09-02)
  - major rework to correct the url logic
    - first checks on dl.fedoraproject.org (master)
    - then tries to download corresponding filepath on download.fedoraproject.org
    - or falls back to master mirror
  - new --dl option to download directly from dl.fedoraproject.org
  - can now find branched development release
  - also compares mirror and master filesizes
  - builds with lts-14

  ## 0.5 (2019-07-06)
  - no hardcoding of devel branch, beta, and respins
  - fix Spins and Cloud/Container paths
  - use rawhide for devel if not branched
  - don't checksum if no file downloaded or new --no-checksum
  - more informative error messages
  - add simple dryrun test script

  ## 0.4 (2019-06-03)
  - drop version 30 special case
  - support gpg verification of checksum file

  ## 0.3 (2019-04-16)
  - run sha256sum check
  - support fedora Spins

  ## 0.2
  - fix and improve symlink naming
  - use new http-directory library to check exact filesize

  ## 0.1
  * initial release
basic-deps:
  http-client: -any
  bytestring: -any
  ansi-wl-pprint: -any
  extra: -any
  unix: -any
  base: <5
  time: -any
  text: -any
  simple-cmd-args: '>=0.1.8'
  filepath: -any
  http-directory: '>=0.1.10'
  http-client-tls: -any
  regex-posix: -any
  optparse-applicative: -any
  xdg-userdirs: -any
  http-types: -any
  simple-cmd: '>=0.2.0'
  directory: '>=1.2.5'
all-versions:
- '0.5'
- '0.6'
- '0.7'
- 0.7.1
- 0.7.2
- 0.7.3
- 0.7.4
- 0.7.5
- 0.7.6
- 0.7.7
- '0.8'
- '0.9'
- 0.9.1
- 0.9.2
- 0.9.3
- 0.9.4
- 0.9.5
- 0.9.5.1
- 0.9.6
author: Jens Petersen
latest: 0.9.6
description-type: markdown
description: |
  # dl-fedora

  [![Hackage](https://img.shields.io/hackage/v/dl-fedora.svg)](https://hackage.haskell.org/package/dl-fedora)
  [![GPL-3 license](https://img.shields.io/badge/license-GPL--3-blue.svg)](LICENSE)
  [![Stackage Lts](http://stackage.org/package/dl-fedora/badge/lts)](http://stackage.org/lts/package/dl-fedora)
  [![Stackage Nightly](http://stackage.org/package/dl-fedora/badge/nightly)](http://stackage.org/nightly/package/dl-fedora)

  A tool for downloading Fedora, ELN, and Centos Stream images.
  By default it targets the Workstation edition of Fedora.

  Usage examples:

  `dl-fedora rawhide` : downloads the latest Fedora Rawhide Workstation Live iso

  `dl-fedora 39 silverblue` : downloads the Fedora Silverblue iso

  `dl-fedora respin kde` : downloads the latest KDE Live respin

  `dl-fedora 38 server --arch aarch64` : will download the Server iso for armv8

  `dl-fedora --run 39` : will download Fedora Workstation and boot the Live image with qemu-kvm.

  `dl-fedora --local rawhide` : shows the current locally available image (as well as the latest one). With `--dryrun` it doesn't check for newest iso.

  `dl-fedora c9s` : downloads a Centos Stream 9 net installer.

  By default dl-fedora downloads to `~/Downloads/`
  (correctly the XDG user "DOWNLOADS" directory),
  but if you create an `iso` subdirectory there (`~/Downloads/iso/`)
  it will use that directory instead.

  `dl-fedora` downloads the latest image redirected from `download.fedoraproject.org` by default, after checking for the latest image at `dl.fedoraproject.org`.
  However if the mirror is not synced yet it will download from `dl.fedoraproject.org` instead. You can use `--no-dl` to avoid checking and downloading from the main dl.fedoraproject.org mirror (in this case a nightly image might not be the very latest).

  If the image is already found to be downloaded
  it will not be re-downloaded of course.
  Curl is used to do the downloading: partial downloads will continue.

  A symlink to the latest iso is also created:
  eg for rawhide it might be `"Fedora-Workstation-Live-x86_64-Rawhide-latest.iso"`.

  It also tries to check the iso checksum and its gpg signature.

  ## Usage
  ```shellsession
  $ dl-fedora --version
  0.9.6
  $ dl-fedora --help
  Fedora iso downloader

  Usage: dl-fedora [--version] [-g|--gpg-keys]
                   [(-C|--no-checksum) | (-c|--checksum)] [-n|--dry-run] [--debug]
                   [-T|--no-http-timeout] [-l|--local] [-r|--run] [-R|--replace]
                   [(-d|--dl) | (-D|--no-dl) | (-k|--koji) | (-m|--mirror URL)]
                   [--cs-devel | --cs-test] [-a|--arch ARCH] RELEASE [EDITION]

    Tool for downloading Fedora iso file images.
    RELEASE = release number, respin, rawhide, test (Beta), stage (RC), eln, c8s, c9s
    EDITION = {cloud,container,everything,server,workstation,silverblue,kinoite,
               sericea,budgie,cinnamon,i3,kde,lxde,lxqt,mate,soas,sway,
               xfce} [default: workstation]

    See <https://fedoraproject.org/wiki/Infrastructure/MirrorManager>
    and also <https://fedoramagazine.org/verify-fedora-iso-file>.

  Available options:
    -h,--help                Show this help text
    --version                Show version
    -g,--gpg-keys            Import Fedora GPG keys for verifying checksum file
    -C,--no-checksum         Do not check checksum
    -c,--checksum            Do checksum even if already downloaded
    -n,--dry-run             Don't actually download anything
    --debug                  Debug output
    -T,--no-http-timeout     Do not timeout for http response
    -l,--local               Show current local image via symlink
    -r,--run                 Boot image in Qemu
    -R,--replace             Delete previous snapshot image after downloading
                             latest one
    -d,--dl                  Use dl.fedoraproject.org (dl.fp.o)
    -D,--no-dl               Do not use dl.fp.o (even if newer)
    -k,--koji                Use koji.fedoraproject.org
    -m,--mirror URL          Mirror url for /pub [default
                             https://download.fedoraproject.org/pub]
    --cs-devel               Use centos-stream development compose
    --cs-test                Use centos-stream test compose (default is
                             production)
    -a,--arch ARCH           Specify arch [default: x86_64]
  ```

  ## Contribution
  dl-fedora is distributed under the GPL 3 license or later.

  Please report issues or pull requests at <https://github.com/juhp/dl-fedora>.
license-name: GPL-3.0-only
