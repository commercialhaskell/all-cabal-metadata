homepage: https://github.com/dahlia/submark#readme
changelog-type: markdown
hash: a63602c4c034f3e557132298e9fa3f8f2e648faafb54f30c94355d3c88d39c57
test-bench-deps:
  hlint: '>=2.0.9 && <4'
  base: '>=4.7 && <5'
  hspec: '>=2.4.4 && <3.0.0'
  text: ==1.*
  cmark: '>=0.5.6 && <0.6.0'
  submark: -any
  template-haskell: '>=2.5'
maintainer: hong.minhee@gmail.com
synopsis: Extract a part from CommonMark/Markdown docs
changelog: |
  `submark` changelog
  ===================

  Version 0.3.0
  -------------

  Released on March 11, 2022.

   -  Added options from `--h1-regex` to `--h6-regex`.  [[#2]]
   -  Added `Text.CommonMark.Sub.HeadingPattern` type.  [[#2]]
   -  Added `Text.CommonMark.Sub.HeadingTitlePattern` type.  [[#2]]
   -  The signature of `Text.CommonMark.Sub.extractSection` function was changed
      from `Level -> (Text -> Text -> Bool) -> Text -> Node -> Node` to
      `HeadingPattern -> Node -> Node`.  [[#2]]
   -  The signature of `Text.CommonMark.Sub.matchesHeading` function was changed
      from `Level -> (Text -> Text -> Bool) -> Text -> Node -> Bool` to
      `HeadingPattern -> Node -> Bool`.  [[#2]]

  [#2]: https://github.com/dahlia/submark/issues/2


  Version 0.2.0
  -------------

  Released on November 6, 2017.

   -  Added `-i`/`--ignore-case` option for case insensitive match.

   -  Wordwrap became turned off by default unless `-c`/`--columns` option is
      present.

   -  The signature of `Text.CommonMark.Sub.extractSection` function was changed
      from `Level -> Text -> Node -> Node` to
      `Level -> (Text -> Text -> Bool) -> Text -> Node -> Node`; the second
      parameter, a predicate for text equality, was added.

   -  The signature of `Text.CommonMark.Sub.matchesHeading` function was changed
      from `Level -> Text -> Node -> Bool` to
      `Level -> (Text -> Text -> Bool) -> Text -> Node -> Bool`; the second
      parameter, a predicate for text equality, was added.


  Version 0.1.0
  --------------

  Initial release.  Released on September 24, 2017.
basic-deps:
  base: '>=4.7 && <5'
  text: ==1.*
  cmark: '>=0.5.6 && <0.6.0'
  submark: -any
  regex-tdfa: '>=1.3.1.2 && <1.4'
  optparse-applicative: '>=0.13.2.0 && <0.17.0.0'
all-versions:
- 0.1.0
- 0.2.0
- 0.3.0
author: Hong Minhee
latest: 0.3.0
description-type: markdown
description: |
  `submark`: Extract a part from CommonMark/Markdown docs
  =======================================================

  [![GitHub Actions][gh-actions-badge]][gh-actions]
  [![Hackage][hackage-badge]][hackage]

  `submark` is a CLI program to extract some particular section from
  a given CommonMark/Markdown document.  I use it for myself to extract
  the latest version section from the *CHANGELOG.md* file, and then reuse the text
  for the corresponding release note on GitHub releases, during automated release
  process which is run on CI.

  [gh-actions-badge]: https://github.com/dahlia/submark/actions/workflows/build.yaml/badge.svg
  [gh-actions]: https://github.com/dahlia/submark/actions/workflows/build.yaml
  [hackage-badge]: https://img.shields.io/hackage/v/submark.svg
  [hackage]: https://hackage.haskell.org/package/submark


  Download & installation
  -----------------------

  Prebuilt binaries for the following platforms and architectures are available on
  [GitHub releases]:

   -  Linux (x86_64)
   -  macOS (x86_64)
   -  Windows (win64)

  For other platforms and architectures, you need to build it by yourself.
  It's written in Haskell, so you need to install [Haskell Stack] first.
  It can be built in the same way other Haskell programs are:

  ~~~~~~~~ bash
  $ stack setup && stack install
  ~~~~~~~~

  [GitHub releases]: https://github.com/dahlia/submark/releases
  [Haskell Stack]: https://haskellstack.org/


  Usage examples
  --------------

  The following examples use [John Gruber's original Markdown introduction][1]:

  ~~~~~~~~ bash
  $ wget https://daringfireball.net/projects/markdown/index.text
  ~~~~~~~~

  Extracting an H3 heading *Command-Line*:

  ~~~~~~~~ bash
  $ submark --h3 "Command-Line" index.text
  ### Command-Line

  Use the `--html4tags` command-line switch to produce HTML output from a
  Unix-style command line. E.g.:

      % perl Markdown.pl --html4tags foo.text

  Type `perldoc Markdown.pl`, or read the POD documentation within the
  Markdown.pl source code for more information.
  ~~~~~~~~

  Note that its textual style differ from the original text.
  Since ``submark`` internally builds an abstract syntax tree from the given input
  text and then render again the result tree, it doesn't maintain trivial styles
  (e.g., whitespaces, ATX vs. Setext headings) but only the semantics.

  There are options from `--h1` to `--h6`:

  ~~~~~~~~ bash
  $ submark --h2 "Download" index.text
  ## Download

  [Markdown 1.0.1](http://daringfireball.net/projects/downloads/Markdown_1.0.1.zip)
  (18 KB) -- 17 Dec 2004
  ~~~~~~~~

  Options from `--h1-regex` to `--h6-regex` take a regular expression instead of
  an exact heading text:

  ~~~~~~~~ bash
  $ submark --h2-regex "^(Down|Up)load$" index.text
  ## Download

  [Markdown 1.0.1](http://daringfireball.net/projects/downloads/Markdown_1.0.1.zip)
  (18 KB) -- 17 Dec 2004
  ~~~~~~~~

  The leading heading can be omitted:

  ~~~~~~~~ bash
  $ submark --h2 "Download" --omit-heading index.text
  [Markdown 1.0.1](http://daringfireball.net/projects/downloads/Markdown_1.0.1.zip)
  (18 KB) -- 17 Dec 2004
  ~~~~~~~~

  Matching is case sensitive by default, but case can be ignored using the option
  `-i`/`--ignore-case`:

  ~~~~~~~~ bash
  $ submark --h2 "DOWNload" index.text

  $ submark --h2 "DOWNload" --ignore-case index.text
  ## Download

  [Markdown 1.0.1](http://daringfireball.net/projects/downloads/Markdown_1.0.1.zip)
  (18 KB) -- 17 Dec 2004
  ~~~~~~~~

  By Unix convention, `-` means pipe:

  ~~~~~~~~ bash
  $ submark --h2 "Download" - < index.text
  ## Download

  [Markdown 1.0.1](http://daringfireball.net/projects/downloads/Markdown_1.0.1.zip)
  (18 KB) -- 17 Dec 2004
  ~~~~~~~~

  There's `-o`/`--out-file` option as well:

  ~~~~~~~~ bash
  $ submark -o download.md --h2 "Download" index.text
  ~~~~~~~~

  [1]: https://daringfireball.net/projects/markdown/index.text


  Software license
  ----------------

  This software is distributed under [GPL 3].

  [GPL 3]: https://www.gnu.org/licenses/gpl-3.0.html
license-name: GPL-3.0-only
