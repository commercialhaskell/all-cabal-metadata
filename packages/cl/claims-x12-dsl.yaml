all-versions:
- 0.1.0.0
author: Charles Ellis O'Riley Jr.
basic-deps:
  Decimal: '>=0.5 && <0.6'
  base: '>=4.7 && <5'
  claims-x12-dsl: '>=0'
  containers: '>=0.6 && <0.8'
  parsec: '>=3.1 && <3.2'
  text: '>=1.2 && <2.2'
  time: '>=1.9 && <1.15'
changelog: |
  # Changelog for `claims-x12-dsl`

  All notable changes to this project will be documented in this file.

  The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
  and this project adheres to the
  [Haskell Package Versioning Policy](https://pvp.haskell.org/).

  ## Unreleased

  ## 0.1.0.0 - YYYY-MM-DD
changelog-type: markdown
description: "# Healthcare Claims X12 Processing DSL\n\nA Domain-Specific Language
  (DSL) for healthcare claims validation and X12 processing, implemented in Haskell.\n\n##
  Overview\n\nThis project provides a type-safe, composable DSL for defining business
  rules for healthcare claims validation. It features both an internal DSL (embedded
  in Haskell) and an external DSL (text-based syntax for business analysts).\n\n##
  Features\n\n- **Type-Safe Internal DSL**: Uses GADTs to ensure rule correctness
  at compile time\n- **Business-Friendly External DSL**: SQL-like syntax that non-programmers
  can read and write\n- **Comprehensive Validation**: Support for amount checks, diagnosis
  codes, procedure codes, place of service, and claim types\n- **Composable Rules**:
  Combine simple rules into complex validation logic using `AND`, `OR`, and `NOT`\n-
  **Full Test Coverage**: Comprehensive test suite using Hspec\n\n## Project Structure\n\n```\nclaims-x12-dsl/\n├──
  src/\n│   ├── Claims/\n│   │   ├── Types.hs           # Core domain types and Rule
  GADT\n│   │   ├── Interpreter.hs     # Rule evaluation engine\n│   │   ├── Rules.hs
  \          # Example business rules\n│   │   ├── Parser.hs          # External DSL
  parser (Parsec)\n│   │   └── Parser/\n│   │       └── AST.hs         # Abstract
  syntax tree for external DSL\n│   └── Lib.hs                 # Main library exports\n├──
  app/\n│   └── Main.hs                # Example application\n├── test/\n│   └── Spec.hs
  \               # Test suite\n├── examples/\n│   └── sample-rules.dsl       # Example
  external DSL rules\n└── package.yaml               # Project dependencies\n```\n\n##
  Getting Started\n\n### Prerequisites\n\nYou'll need Stack installed. If you don't
  have it:\n\n**macOS:**\n```bash\ncurl -sSL https://get.haskellstack.org/ | sh\n```\n\n**Linux:**\n```bash\ncurl
  -sSL https://get.haskellstack.org/ | sh\n```\n\n**Windows:**\nDownload the installer
  from [haskellstack.org](https://docs.haskellstack.org/en/stable/install_and_upgrade/)\n\n###
  Installation\n\n1. **Clone or navigate to the project:**\n   ```bash\n   cd /path/to/claims-x12-dsl\n
  \  ```\n\n2. **Build the project:**\n   ```bash\n   stack build\n   ```\n   \n   This
  will:\n   - Download and install the correct GHC version (9.6.6) if needed\n   -
  Install all dependencies\n   - Compile the library and executable\n   - First build
  takes ~60 seconds; subsequent builds are much faster\n\n3. **Verify the build:**\n
  \  ```bash\n   stack test\n   ```\n   \n   You should see:\n   ```\n   22 examples,
  0 failures\n   Finished in 0.0036 seconds\n   ```\n\n### Running the Application\n\n**Run
  the example application:**\n```bash\nstack run\n```\n\nThis validates a sample $75,000
  inpatient claim and displays results:\n```\nHealthcare Claims X12 Processing DSL\n====================================\n\nValidating
  example claim:\nClaim ID: \"CLM001\"\nAmount: $75000.00\nType: Inpatient\n\nValidation
  Results:\n-------------------\nRule 1: FAIL - \"Review Required: High value claim
  exceeds $50,000\"\nRule 2: PASS\nRule 3: PASS\nRule 4: PASS\nRule 5: PASS\n```\n\n###
  Running Tests\n\n**Run all tests:**\n```bash\nstack test\n```\n\n**Run tests with
  detailed output:**\n```bash\nstack test --test-arguments=\"--format=progress\"\n```\n\n**Run
  tests with coverage:**\n```bash\nstack test --coverage\n```\n\n### Interactive Development\n\n**Start
  a REPL (GHCi):**\n```bash\nstack ghci\n```\n\nThen you can interactively test the
  DSL:\n```haskell\nghci> :load src/Claims/Types.hs\nghci> :load src/Claims/Interpreter.hs\nghci>
  import Data.Decimal\nghci> import Data.Time\n-- Create a claim and test rules interactively\n```\n\n##
  Usage\n\n### Internal DSL (Haskell)\n\n```haskell\nimport Claims.Types\nimport Claims.Interpreter\nimport
  Data.Decimal (realFracToDecimal)\nimport Data.Time (fromGregorian)\n\n-- Define
  a claim\nclaim = Claim\n  { claimId = \"CLM001\"\n  , patientId = \"PAT12345\"\n
  \ , providerId = \"PRV98765\"\n  , serviceDate = fromGregorian 2025 1 5\n  , totalAmount
  = realFracToDecimal 2 75000\n  , diagnosisCodes = [\"I21.0\", \"I25.10\"]\n  , procedureCodes
  = [\"99223\", \"93000\"]\n  , placeOfService = \"21\"\n  , claimType = Inpatient\n
  \ }\n\n-- Define a rule\nhighValueRule :: Rule ValidationResult\nhighValueRule =
  \n  If (greaterThan 50000)\n    (needsReview \"High value claim exceeds $50,000\")\n
  \   approve\n\n-- Evaluate the rule\nresult = eval claim highValueRule\n```\n\n###
  External DSL (Business Analyst Syntax)\n\nCreate a rules file (e.g., `rules.dsl`):\n\n```\nRULE
  HighValueReview\nDESCRIPTION \"Flag high-value claims for manual review\"\nWHEN\n
  \ claim.amount > 50000\nTHEN\n  REQUIRE_REVIEW \"Claim exceeds high-value threshold\"\nEND\n\nRULE
  EmergencyRoomValidation\nDESCRIPTION \"Validate ER claims have appropriate diagnoses\"\nWHEN\n
  \ claim.place_of_service = \"23\" AND\n  NOT (claim.has_diagnosis \"S06\" OR claim.has_diagnosis
  \"I21\")\nTHEN\n  REJECT \"Emergency room claim missing emergency diagnosis\"\nEND\n```\n\nParse
  and use the rules:\n\n```haskell\nimport Claims.Parser\n\nrulesText <- readFile
  \"rules.dsl\"\ncase parseRules rulesText of\n  Left err -> print err\n  Right parsedRules
  -> do\n    let internalRules = map convertToInternalRule parsedRules\n    let results
  = validateClaim claim internalRules\n    print results\n```\n\n## Built-in Business
  Rules\n\nThe library includes several example business rules:\n\n1. **High Value
  Claims Review**: Claims exceeding $50,000 require manual review\n2. **Emergency
  Room Validation**: ER claims must have emergency diagnosis codes\n3. **Inpatient
  Admission**: Inpatient claims must include admission procedure codes\n4. **Complex
  Professional Claims**: Multi-condition validation for professional claims\n5. **Outpatient
  Surgery Minimum**: Outpatient surgeries must meet minimum amounts\n\n## External
  DSL Syntax\n\n### Conditions\n\n- Amount comparisons: `claim.amount > 50000`, `claim.amount
  BETWEEN 0 AND 100`\n- Code checks: `claim.has_diagnosis \"I21\"`, `claim.has_procedure
  \"99223\"`\n- Claim properties: `claim.type = \"Inpatient\"`, `claim.place_of_service
  = \"23\"`\n- Logical operators: `AND`, `OR`, `NOT`\n\n### Actions\n\n- `APPROVE`:
  Automatically approve the claim\n- `REJECT \"message\"`: Reject the claim with a
  reason\n- `REQUIRE_REVIEW \"message\"`: Flag for manual review\n\n## Dependencies\n\n-
  **base**: Core Haskell library\n- **text**: Efficient text handling\n- **time**:
  Date/time support\n- **Decimal**: Precise decimal arithmetic for currency\n- **parsec**:
  Parser combinator library for external DSL\n- **containers**: Data structures\n-
  **hspec**: Testing framework\n- **QuickCheck**: Property-based testing\n\n## License\n\nBSD-3-Clause\n\n##
  Author\n\nBased on the Healthcare Claims X12 Processing DSL specification.\n"
description-type: markdown
hash: ab6653807fa2cd4e74b4b9d8df5c6144ce7d401d7cf4fa5347d4441d5b2d3bdd
homepage: https://github.com/nagashi/claims-x12-dsl#readme
latest: 0.1.0.0
license-name: BSD-3-Clause
maintainer: ceoriley@gmail.com
synopsis: Type-safe DSL for healthcare claims validation and X12 processing
test-bench-deps:
  Decimal: '>=0.5 && <0.6'
  QuickCheck: '>=2.14 && <2.16'
  base: '>=4.7 && <5'
  claims-x12-dsl: '>=0'
  containers: '>=0.6 && <0.8'
  hspec: '>=2.7 && <2.12'
  parsec: '>=3.1 && <3.2'
  text: '>=1.2 && <2.2'
  time: '>=1.9 && <1.15'
