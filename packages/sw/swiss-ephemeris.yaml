homepage: https://github.com/lfborjas/swiss-ephemeris#readme
changelog-type: markdown
hash: a285cb4391dd9c3972a902dc98f3b85c278b2764d144a73a96b0673c8bd0a1d4
test-bench-deps:
  base: '>=4.7 && <4.14'
  hspec: '>=2.7 && <2.8'
  swiss-ephemeris: -any
  QuickCheck: '>=2.12 && <=2.14'
  directory: '>=1.3 && <1.4'
maintainer: swiss-ephemeris@lfborjas.com
synopsis: Haskell bindings for the Swiss Ephemeris C library
changelog: "# Changelog for swiss-ephemeris\n\n## v0.3.0.0\n\n**Breaking fixes to
  `calculateCusps` and `calculateCoordinates`**\n\n* Upgrades to v2.09.03 of the C
  library, to incorporate some bug fixes that seem marginally related\n  to random
  breakage I've seen; read more at: https://www.astro.com/swisseph/swephprg.htm#_Toc49847971\n*
  Introduces `withoutEphemerides` which sets the ephe path to `NULL` (via the also
  new `setNoEphemeridesPath`)\n  and takes care of calling `closeEphemerides`. Use
  this or `withEphemerides` for memory safety,\n  only call the functions directly
  if you _really_ know what you're doing (i.e setting/closing ephemerides\n  in some
  other manner.)\n* Both calculation functions are now `IO` computations, to reflect
  the fact that they may interact\n  with ephemeris data and allocate memory that
  `closeEphemerides` _has_ to free.\n* More closely reflects the underlying behavior
  for calculating cusps: it _may_ return\n  cusps in the `Porphyrius` system if given
  a point for which the chosen system fails. To\n  more explicitly reflect this, we
  now have `calculateCuspsStrict` which returns a `Left` value\n  if the requested
  house system couldn't be used. `calculateCuspsLenient`  always returns a calculation,\n
  \ and is aliased to `calculateCusps` as the \"default\" method.\n* Since the calculation
  may have changed the house system, we now return a `systemUsed` entry\n  in the
  `CuspsCalculation` record.\n\n\n## v0.2.0.0\n\n* Introduces `withEphemerides` for
  bracketed access to the ephemeris directory.\n* Changes the signature of `calculateCusps`
  to return a `Left` value if the underlying library\n  is unable to calculate the
  cusps.\n* Introduces \"monadic\" versions of the calculations that work with instances
  of `MonadFail`:\n  `calculateCuspsM` and `calculateCoordinatesM`\n* Improves test
  coverage with property testing.\n\n## v0.1.0.0 - 0.1.0.2(2020-08-12)\n\n* Bundles
  the C code for v2.09.01 of [Swiss\n  Ephemerides](https://www.astro.com/swisseph/swephinfo_e.htm)
  -- refer to that\n  page and related documentation for other possible additions
  to this package! \n* First release with basic bindings to calculate the coordinates
  of bodies\n  between the Sun and Chiron, plus cusps and major angles --\n`calculateCoordinates`
  and `calculateCusps`, respectively.\n* The functions `setEphemeridesPath` and `closeEphemerides`
  are provided to\n  initialize (important) and release (less important) resources
  related to\n  caching calculations and locating the data files for ephemerides.\n"
basic-deps:
  base: '>=4.7 && <4.14'
all-versions:
- 0.1.0.2
- 0.2.0.0
- 0.3.0.0
author: Luis Borjas Reyes
latest: 0.3.0.0
description-type: markdown
description: "# swiss-ephemeris\n\n![build](https://github.com/lfborjas/swiss-ephemeris/workflows/Haskell%20CI/badge.svg)\n\n\nHaskell
  bindings for the [Swiss Ephemeris](https://www.astro.com/swisseph/swephinfo_e.htm)
  library.\n\nSee the tests in the `spec` folder for thorough example usage, but here's
  a simple \"main\" that demonstrates the current abilities, inspired by the [sample
  program in the official library](https://www.astro.com/swisseph/swephprg.htm#_Toc46406771):\n\n```haskell\nimport
  SwissEphemeris\n\nmain :: IO\nmain = do \n  -- location of your ephemeris directory.
  We bundle a sample one in `swedist`.\n  setEphemeridesPath \"./swedist/sweph_18\"\n\n
  \ let time = julianDay 1989 1 6 0.0\n      place = mkCoordinates{lat = 14.0839053,
  lng = -87.2750137}\n\n  -- locate all bodies between the Sun and Chiron (further
  asteroids currently not supported, but they're an enum entry away)\n  -- use the
  Placidus house system, which is the most traditional.\n  forM_ [Sun .. Chiron] $
  \\planet -> do\n    -- if no ephemerides data is available for the given planetary
  body, a `Left` value\n    -- will be returned.\n    coord <- calculateCoordinates
  time planet\n    putStrLn $ show planet <> \": \" <> show coord\n  -- Calculate
  cusps for the given time and place, preferring the `Placidus` system.\n  -- note
  that the underlying library may decide to use a different system if it can't\n  --
  calculate cusps (happens for the Placidus and Koch systems in locations near the
  poles.)\n  cusps <- calculateCusps time place Placidus\n  putStrLn $ \"Cusps: \"
  <> show cusps\n  -- the underlying library, sadly, allocates some memory/file descriptors,
  you can free it with:\n  closeEphemerides\n```\nThe above should print the latitude
  and longitude (plus some velocities) for all planets, and the cusps and other major
  angles.\n\nThere's also `withEphemerides` and `withoutEphemerides` bracket-style
  functions that take care of closing the files for you.\n\nTo see actual results
  and more advanced usage, check out the tests. For some more advanced examples, see
  `swetest.c` and `swemini.c` in the `csrc` directory: they're the test/example programs
  provided by the original authors.\n\n\n## Notes\n\nAll the code in the `csrc` folder
  comes directly from the [latest official tarball, v2.09.03](https://www.astro.com/ftp/swisseph/).
  \n\nThe `swedist` folder includes the original documentation from the tarball in
  PDF (see the `doc`) folder, and a copy of ephemeris data files.\n\nFor other formats
  of the original documentation, see: https://www.astro.com/ftp/swisseph/doc/\n\nThe
  authors also host HTML versions of the manuals. Two are provided, a general reference
  and a programming reference. Both are very useful to get\nacquainted with the functionality
  and implementation details.\n\n* [General Reference](https://www.astro.com/swisseph/swisseph.htm)\n*
  [Programmer's Reference](https://www.astro.com/swisseph/swephprg.htm)\n\n### Ephemerides
  files\n\nAs noted in the [original documentation](https://www.astro.com/swisseph/swisseph.htm)
  you can omit the `setEphePath` call and calculations will use a built-in analytical\nephemeris
  which:\n\n> provides \"only\" a precision of 0.1 arc seconds for the planets and
  3\" for the Moon. No asteroids will be available, and no barycentric option can
  be used.\n\nFor convenience, we bundle a few files for the time range `1800 AD â€“
  2399 AD`. If you were born before that, or plan to code e.g. transits for after
  that (!) or \nyou'd prefer even more precision, you can [download more ephemerides
  files from the astro.com downloads page](https://www.astro.com/ftp/swisseph/ephe/)\n\nI
  chose the bundled files due to this comment in the official docs:\n\n> If the [JPL]
  file is too big, then you can download the files sepl_18.se1 and semo_18.se1 from
  here: http://www.astro.com/ftp/swisseph/ephe/\n\nFor a full explanation of the files
  available, see the [Description of the Ephemerides](https://www.astro.com/swisseph/swisseph.htm#_Toc46391649)
  section of the original manual, also of\ninterest is the [comparison between the
  Swiss Ephemeris and the raw NASA JPL\ndata](https://www.astro.com/swisseph/swisseph.htm#_Toc46391741).\n\n##
  Contributing\n\nI've only made available the types and functions that are useful
  for my own, traditional, horoscope calculations.\nFeel free to add more! See the
  [astro.com documentation](https://www.astro.com/swisseph/swisseph.htm) for ideas.\n"
license-name: GPL-2.0-only
