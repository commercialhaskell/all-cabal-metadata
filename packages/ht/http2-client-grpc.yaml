homepage: https://github.com/lucasdicioccio/http2-client-grpc#readme
changelog-type: markdown
hash: 26f4b6dad02a0122f254e1cae97df3278dfc02d367e658c5fa0701e7375c09bd
test-bench-deps:
  base: -any
  http2-client-grpc: -any
maintainer: lucas@dicioccio.fr
synopsis: Implement gRPC-over-HTTP2 clients.
changelog: ! '# Changelog for http2-client-grpc


  ## Unreleased changes


  ## 0.5.0.2


  Add bidirectional and general streams.

'
basic-deps:
  bytestring: ! '>=0.10.8 && <0.10.9'
  http2-grpc-types: ! '>=0.3 && <0.4'
  case-insensitive: ! '>=1.2.0 && <1.3'
  http2: ! '>=1.6 && <1.7'
  base: ! '>=4.11 && <5'
  data-default-class: ! '>=0.1 && <0.2'
  text: ! '>=1.2 && <1.3'
  tls: ! '>=1.4 && <1.5'
  http2-client: ! '>=0.8 && <0.9'
  async: ! '>=2.2 && <2.3'
  lens: ! '>=4.16 && <4.17'
  proto-lens: ! '>=0.3 && <0.4'
  binary: ! '>=0.8 && <0.9'
  proto-lens-protoc: ! '>=0.3 && <0.4'
all-versions:
- '0.1.0.0'
- '0.2.0.0'
- '0.2.0.1'
- '0.3.0.0'
- '0.4.0.0'
- '0.5.0.0'
- '0.5.0.1'
- '0.5.0.2'
author: Lucas DiCioccio
latest: '0.5.0.2'
description-type: markdown
description: ! "# http2-client-grpc\n\nA native HTTP2 gRPC client library using `proto-lens`
  and `http2-client`.\n\n## Summary\n\nThis project provides a library that leverages
  the code generated using\nproto-lens (in particular, proto-lens-protoc) to implement
  the client-side of\ngRPC services.\n\n## Usage\n\n### Prerequisites\n\nIn addition
  to a working Haskell dev environment, you need to:\n- build the `proto-lens-protoc`
  executable (`proto-lens`)\n- install the `protoc` executable\n\n### Adding .proto
  files to a Haskell package\n\nIn order to run gRPC:\n\n- generate the `Proto` stubs
  in some `gen` directory\n\nA single `protoc` invocation may be enough for both Proto
  and GRPC outputs:\n\n```bash\nprotoc  \"--plugin=protoc-gen-haskell-protolens=${protolens}\"
  \\\n    --haskell-protolens_out=./gen \\\n    -I \"${protodir1} \\\n    -I \"${protodir2}
  \\\n    ${first.proto} \\\n    ${second.proto}\n```\n\n- add the `gen` sourcedir
  for the generated to your .cabal/package.yaml file (cf. 'hs-source-dirs').\n- add
  the generated Proto modules to the 'exposed-modules' (or 'other-modules') keys\n\nA
  reliable way to list the module names is the following bash invocation:\n\n```bash\nfind
  gen -name \"*.hs\" | sed -e 's/gen\\///' | sed -e 's/\\.hs$//' | tr '/' '.'\n```\n\nUnlike
  `proto-lens`, this project does not yet provide a modified `Setup.hs`.\nAs a result,
  we cannot automate these steps from within Cabal/Stack. Hence,\nyou'll have to automate
  these steps outside your Haskell toolchain.\n\n## Calling a GRPC service\n\nIn short,
  use `http2-client` with the `Network.GRPC.call` function and let the types guide
  you.\n\n### Example\n\nYou'll find an example leveraging the awesome `grpcb.in`
  service at https://github.com/lucasdicioccio/http2-client-grpc-example .\n\n###
  gRPC service mapping\n\nThe Protobuf format specifies the notion of Service which
  can have one or more\nRPCs.  The gRPC protocal maps these services onto HTTP2 headers
  and HTTP2\nframes.  In general, gRPC implementation generate one inlined function
  per RPC.\nThis implementation differs by decoupling the HTTP2 transport and leveraging\ngenerics
  to provide generic functions. This design allows the\n`Network.GRPC.call` to be
  type safe and multi-usage. For instance, you can wrap\nthis function with whatever
  metrics/benchmark code and have all your RPC calls\nbe monitored in a uniform way.\n\n##
  Status\n\nThis library is currently an early-stage library. Expect breaking changes.\n\n##
  Next steps\n\n- pass timeout as argument\n- provide function to map raw results
  into commonly-understood GRPC errors\n- (nice-to-have) support effectful compression
  (Zlib pure compression is supported)\n"
license-name: BSD3
