homepage: http://www.yesodweb.com/book/persistent
changelog-type: markdown
hash: 71a96862ca3e4d77c8fa0e5312fc46b6aa035e94700d642cb0ab8f849006c99b
test-bench-deps:
  bytestring: -any
  base: ! '>=4.10 && <5'
  persistent: -any
  hspec: ! '>=2.4'
  text: -any
  persistent-template: -any
  criterion: -any
  deepseq-generics: -any
  file-embed: -any
  deepseq: -any
  QuickCheck: -any
  aeson: -any
  template-haskell: -any
maintainer: Michael Snoyman <michael@snoyman.com>, Greg Weber <greg@gregweber.info>
synopsis: Type-safe, non-relational, multi-backend persistence.
changelog: |
  ## Unreleased changes

  ## 2.8.0

  * Reduces the amount of code generated by Template Haskell. The amount of code generated for a certain function was O(N^2) with respect to the number of fields on a given Entity. This change shows dramatic improvements in benchmarks for compiling Persistent models. [#]()
  * Drops support for GHC 8.0, so that `DerivingStrategies` can be used by `persistent-template`
  * `persistent-template` now requires `DerivingStrategies`, `GeneralizedNewtypeDeriving`, and `StandaloneDeriving` to be enabled in the file where Persistent entities are created
  * Fixes a long-standing issue where persistent-template would fail when `DeriveAnyClass` was enabled (See #578)
  * [#1002](https://github.com/yesodweb/persistent/pull/1002)

  ## 2.7.4

  * Remove an overlapping instance for `Lift a`. [#998](https://github.com/yesodweb/persistent/pull/998)

  ## 2.7.3

  * Update module documentation for `Database.Persist.TH` to better describe the purpose of the module [#968](https://github.com/yesodweb/persistent/pull/968)
  * Support template-haskell-2.15 [#959](https://github.com/yesodweb/persistent/pull/959)

  ## 2.7.2

  * Expose the knot tying logic of `parseReferences` so that users can build
    migrations from independently define entities at runtime [#932](https://github.com/yesodweb/persistent/pull/932)

  ## 2.7.1

  * Add the `mkEntityDefList` function to work around [#902](https://github.com/yesodweb/persistent/issues/902). [#904](https://github.com/yesodweb/persistent/pull/904)

  ## 2.7.0

  * Depends on `persistent-2.10.0` which provides the `OnlyOneUniqueKey` and `AtLeastOneUniqueKey` classes. Automatically generates instances for these classes based on how many unique keys the entity definition gets. This changes requires `UndecidableInstances` to be enabled on each module that generates entity definitions. [#885](https://github.com/yesodweb/persistent/pull/885)
  * Removed deprecated `sqlOnlySettings`. Please use `sqlSettings` instead. [#894](https://github.com/yesodweb/persistent/pull/894)

  ## 2.6.0
  * [persistent#846](https://github.com/yesodweb/persistent/pull/846): Improve error message when marshalling fails
  * [persistent#826](https://github.com/yesodweb/persistent/pull/826): Change `Unique` derive `Show`

  ## 2.5.4

  * [persistent#778](https://github.com/yesodweb/persistent/issues/778): Add `persistManyFileWith`.

  ## 2.5.3.1

  * Slight improvement to the error message when a Persistent field can't be parsed from database results

  ## 2.5.3

  * Exposed `parseReferences` to allow custom QuasiQuoters

  ## 2.5.2

  * Fix incorrect `ToJSON`/`FromJSON` instance generation for generic
    backends

  ## 2.5.1.6

  Allow non-null self-references in a list

  ## 2.5.1.4

  * Allow composite Primary keys for tables that contain nullable fields.
  * Support foreign keys to non-integer ids

  ## 2.5.1.3

  * fix GHC 7.8 bug when a field name is "type"

  ## 2.5.1.2

  * fix a bad Eq instance /= definition for Key when mpsGenetric=True

  ## 2.5.0.1

  * workaround TH bug in GHC 7.10

  ## 2.5

  * read/write typeclass split

  ## 2.1.6

  * aeson 0.11
  * transformers 0.5
  ## 2.1.4

  support http-api-data for url serialization

  ## 2.1.3.3

  By default explicitly use Int64 for foreign key references.
  This avoids confusion on a 32 bit system.

  ## 2.1.3.1

  Support foreign key references to composite primary keys

  ## 2.1.0.1

  Support for monad-control 1.0
basic-deps:
  bytestring: ! '>=0.10'
  base: ! '>=4.10 && <5'
  persistent: ! '>=2.10 && <3'
  unordered-containers: -any
  text: ! '>=1.2'
  http-api-data: ! '>=0.3.7'
  monad-control: ! '>=1.0 && <1.1'
  path-pieces: -any
  th-lift-instances: ! '>=0.1.14 && <0.2'
  containers: -any
  monad-logger: -any
  transformers: ! '>=0.5 && <0.6'
  aeson: ! '>=1.0 && <1.5'
  template-haskell: ! '>=2.11'
all-versions:
- 0.5.0
- 0.5.0.1
- 0.5.1
- 0.6.1
- 0.6.2
- 0.6.3
- 0.6.3.1
- 0.7.0
- 0.8.0
- 0.8.1
- 0.8.1.1
- 0.8.1.2
- 0.8.2
- 0.9.0
- 0.9.0.1
- 0.9.0.2
- 1.0.0
- 1.0.0.1
- 1.0.0.2
- 1.1.0
- 1.1.1
- 1.1.2
- 1.1.2.1
- 1.1.2.2
- 1.1.2.3
- 1.1.2.4
- 1.1.2.5
- 1.1.3
- 1.1.3.1
- 1.2.0
- 1.2.0.1
- 1.2.0.2
- 1.2.0.3
- 1.2.0.4
- 1.2.0.5
- 1.2.0.6
- 1.3.0
- 1.3.1
- 1.3.1.1
- 1.3.1.2
- 1.3.1.3
- 1.3.1.4
- 1.3.2.1
- 1.3.2.2
- 2.0.1.1
- 2.0.5
- 2.0.7
- 2.0.8
- '2.1'
- 2.1.0.1
- 2.1.1
- 2.1.3
- 2.1.3.1
- 2.1.3.3
- 2.1.3.4
- 2.1.3.6
- 2.1.3.7
- 2.1.4
- 2.1.5
- 2.1.6
- 2.1.7
- 2.1.8
- 2.1.8.1
- '2.5'
- 2.5.1
- 2.5.1.1
- 2.5.1.2
- 2.5.1.3
- 2.5.1.4
- 2.5.1.5
- 2.5.1.6
- 2.5.2
- 2.5.3
- 2.5.3.1
- 2.5.4
- 2.6.0
- 2.7.0
- 2.7.1
- 2.7.2
- 2.7.3
- 2.7.4
- 2.8.0
author: Michael Snoyman <michael@snoyman.com>
latest: 2.8.0
description-type: markdown
description: "## persistent-template\n\nProvides Template Haskell helpers for persistent.
  For more information, see\n[the chapter in the Yesod book](http://www.yesodweb.com/book/persistent).\n\n###
  code organization\n\nThe TH.hs module contains code generators.\npersistent-template
  uses `EntityDef`s that it gets from the quasi-quoter.\nThe quasi-quoter is in persistent
  Quasi.hs\nSimilarly mant of the types come from the persistent library\n\n### Development
  tips\n\nTo get a better idea of what code you're generating, you can output the
  content of Template Haskell expressions to a file:\n\n```\nstack test persistent-template
  --ghc-options='-ddump-splices -ddump-file'\n```\n\nThe output will be in the `.stack-work`
  directory. The exact path will depend on your specific setup, but if you search
  for files ending in `.dump-splices` you'll find the output (`find .stack-work -type
  f -name '*.dump-splices'`)\n\nIf you make changes to the generated code, it is highly
  recommended to compare the output with your changes to output from `master` (even
  better if this diff is included in your PR!). Seemingly small changes can have dramatic
  changes on the generated code. \n\nFor example, embedding an `EntityDef` in a function
  that was called for every field of that `Entity` made the number of generated lines
  O(N^2) for that functionâ€”very bad!\n"
license-name: MIT
